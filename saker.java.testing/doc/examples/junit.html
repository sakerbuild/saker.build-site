<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Using JUnit&nbsp;|&nbsp;saker.java.testing</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
	
	<link rel="stylesheet" href="../../../res/bootstrap.min.css" >
	<link rel="stylesheet" href="../../../res/doc-saker.css" >

	<script type="application/ld+json">
	{
	  "@context": "https://schema.org",
	  "@type": "WebSite",
	  "name": "saker.java.testing",
	  "url": "https://saker.build/saker.java.testing"
	}
	</script>
</head>
<body data-nav-location="packagedoc" data-subdoc-presence="nest-package packagedoc javadoc taskdoc">
<div class="doc-nav-bar">
	<div class="container">
		<a class="home-link" href="../../index.html" title="saker.java.testing"><img style="height: 2.5em;" class="logo" src="../../../res/logo.svg"/><span class="page-name">saker.java.testing</span></a>
		<a class="nav-location-item" data-nav-location="doc-docs" href="../../doc/index.html" title="Documentation">Documentation</a>
		<a class="nav-location-item" data-nav-location="doc-taskdoc" href="../../taskdoc/index.html" title="Build task documentation">TaskDoc</a>
		<a class="nav-location-item" data-nav-location="doc-javadoc" href="../../javadoc/index.html"title="Java API documentation">JavaDoc</a>
		<div class="nav-bar-controls">
			<label class="d-xl-none nav-bar-collapse" for="collapse-nav-bar-label">
				<svg style="height: 1.5em;" viewBox="0 0 24 24">
				    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
				</svg>
			</label>
			<input style="display:none;" id="collapse-nav-bar-label" type="checkbox"/>
			<div class="nav-bar-items">
				<a href="/" title="saker.build home page">Home</a>
				<a href="/buildtrace.html" title="Build trace viewer">Build trace</a>
				<a style="display:none;" href="/sponsor.html" title="Sponsoring development">Sponsor</a>
				<a href="/blog/" title="saker.build system blog">Blog</a>
				<a class="no-external-icon" href="https://github.com/sakerbuild/saker.build" title="saker.build GitHub repository">GitHub</a>
			</div>
		</div>
	</div>
</div>
<div class="container page-contents packagedoc">
	<div class="row">
		<div class="col-12 col-lg-3 col-xl-2 p-lg-0">
			<div class="doc-navigation-container">
				<label class="d-lg-none nav-collapse" for="doc-collapse-nav-label">
					<svg style="height: 1.5em;" viewBox="0 0 24 24">
					    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
					</svg>
					Navigation
				</label>
				<input style="display:none;" id="doc-collapse-nav-label" type="checkbox"/> 
				<div class="doc-nav">  <div class="doc-section"><ul><li><a class="doc-nav-section-link" href="../../index.html" title="Index">Index</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Package details</p><ul><li><a class="doc-nav-section-link" href="../index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../gettingstarted.html" title="Getting started">Getting started</a></li><li><a class="doc-nav-section-link" href="../performancecomparison.html" title="Performance comparison">Performance comparison</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Testing</p><ul><li><a class="doc-nav-section-link" href="../testing/index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../testing/classpath.html" title="Test classpath">Test classpath</a></li><li><a class="doc-nav-section-link" href="../testing/testinvocation.html" title="Test invocation">Test invocation</a></li><li><a class="doc-nav-section-link" href="../testing/testparameters.html" title="Test parameters">Test parameters</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Examples</p><ul><li><a class="doc-nav-section-link" href="index.html" title="Overview">Overview</a></li><li class="doc-active doc-active-parent"><a class="doc-nav-section-link" href="junit.html" title="Using JUnit">Using JUnit</a></li></ul>  </div></div>
			</div>
		</div>
		<div class="col-12 col-lg-9 col-xl-10 doc-page">
			<div class="doc-breadcrumb">
				<ol itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a itemscope itemtype="https://schema.org/WebPage" itemprop="item" href="../../index.html" title="saker.java.testing" itemid="/saker.java.testing/index.html"><span itemprop="name">saker.java.testing</span></a><meta itemprop="position" content="1" /></li> &rsaquo; <li><span title="Examples">Examples</span></li> &rsaquo; <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a itemscope itemtype="https://schema.org/WebPage" itemprop="item" href="junit.html" title="Using JUnit" itemid="/saker.java.testing/doc/examples/junit.html"><span itemprop="name">Using JUnit</span></a><meta itemprop="position" content="2" /></li></ol>
			</div>
			<div class="sb-sponsors" style="display: none;">
	<span class="sb-sponsors-title">Sponsors</span>
	<div class="container">
		<div class="row">
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
		</div>
	</div>
</div>
			<div class="doc-content"><h1 id="using-junit">Using JUnit<a class="doc-heading-anchor" href="#using-junit"></a></h1>
<p>In this example we'll show the test configuration that can be used to run Java test with JUnit. In this example we'll do the following:</p>
<ul class="doc-md-list">
<li>Compile our app sources.</li>
<li>Compile our test sources.</li>
<li>Locate the JUnit framework and add it to the classpath using Maven.</li>
<li>Invoke the tests.</li>
</ul>
<pre class="doc-code-block"><code class="language-sakerscript"><span class="c">$junitcp</span> = <span class="d"><a href="../../../saker.maven.classpath/taskdoc/saker.maven.classpath.html" title="Task: saker.maven.classpath()">saker.maven.classpath</a>(<a href="../../../saker.maven.support/taskdoc/saker.maven.resolve.html" title="Task: saker.maven.resolve()">saker.maven.resolve</a>(</span><span class="e">&quot;junit:junit:4.12&quot;</span><span class="d">))</span>
<span class="c">$src</span> = <span class="d"><a href="../../../saker.java.compiler/taskdoc/saker.java.compile.html" title="Task: saker.java.compile()">saker.java.compile</a>(</span><span class="e">src</span><span class="d">)</span>
<span class="c">$tests</span> = <span class="d"><a href="../../../saker.java.compiler/taskdoc/saker.java.compile.html" title="Task: saker.java.compile()">saker.java.compile</a>(</span>
	<span class="h">SourceDirectories</span>: <span class="e">test</span>,
	<span class="h">ClassPath</span>: <span class="i">[</span>
		<span class="c">$src</span><span class="i">,</span>
		<span class="c">$junitcp</span><span class="i">,</span>
	<span class="i">]</span>,
<span class="d">)</span>

<span class="d">saker.java.test(</span>
	<span class="h">TestRunnerClassPath</span>: <span class="c">$junitcp</span>,
	<span class="h">ClassPath</span>: <span class="c">$src</span>,
	<span class="h">TestClassPath</span>: <span class="c">$tests</span><span class="f">[</span><span class="g">ClassDirectory</span><span class="f">]</span>,
	<span class="h">TestInvokerParameters</span>: <span class="i">{</span>
		<span class="g">TestRunnerClass</span>: <span class="e">org.junit.runner.JUnitCore</span>
	<span class="i">}</span>,
	<span class="h">TestClasses</span>: <span class="e">**.*Test</span>,
<span class="d">)</span>
</code></pre>
<p>The above is what we consider the absolute minimal example that uses JUnit. Let's break it apart:</p>
<p>The <code>$junitcp</code> variable is set to represent a <a href="../../../saker.maven.classpath/index.html" title="Index">Maven classpath</a>. It is passed as the input for the test compilation, and as well to the test runtime classpath.</p>
<p>The <code>$src</code> variable contains the compilation results of our Java app. The sources are under the <code>src</code> directory.</p>
<p>The <code>$tests</code> variable is the result of the test compilation. It has the <code>$src</code> as one of its classpath input, as the tests are supposed to test the classes of our app.</p>
<p>We call the <a href="../../taskdoc/saker.java.test.html"><code>saker.java.test()</code></a> task to invoke the testing. The <a href="../../taskdoc/saker.java.test.html#TestRunnerClassPath"><code>TestRunnerClassPath</code></a> contains the JUnit testing framework. The <a href="../../taskdoc/saker.java.test.html#ClassPath"><code>ClassPath</code></a> contains the classes that are the subject of testing.</p>
<p>The <a href="../../taskdoc/saker.java.test.html#TestClassPath"><code>TestClassPath</code></a> parameter is set to the <strong>class directory</strong> of the test compilation result. We don't want to pass the direct result of the <code>$tests</code> compilation, as that would transitively include the input classpaths of the compilation as well. However, as the necessary runtime dependencies are already added in the <a href="../../taskdoc/saker.java.test.html#TestRunnerClassPath"><code>TestRunnerClassPath</code></a> and <a href="../../taskdoc/saker.java.test.html#ClassPath"><code>ClassPath</code></a>, therefore we need to prevent adding them multiple times to the test classpath.</p>
<p>We set the <a href="../../javadoc/saker/java/testing/api/test/invoker/ReflectionJavaTestInvoker.html#PARAMETER_TEST_RUNNER_CLASS"><code>TestRunnerClass</code></a> test invoker parameter to tell the test invoker to use the <a href="https://junit.org/junit4/javadoc/latest/org/junit/runner/JUnitCore.html" title="JUnitCore (JUnit API)"><code>org.junit.runner.JUnitCore</code></a> entry point for the testing framework.</p>
<p>The <a href="../../taskdoc/saker.java.test.html#TestClasses"><code>TestClasses</code></a> parameter set the test case classes based on their names. We run the tests for every class in the <a href="../../taskdoc/saker.java.test.html#TestClassPath"><code>TestClassPath</code></a> that end with <code>Test</code>.</p>
<link href="../../../css/sakerscript.css"  rel="stylesheet" type="text/css" /></div>
			<div class="end-section-links">
				<div class="end-section-prev">
					<a class="doc-prev-section" href="../../doc/examples/index.html" title="Overview"><svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" />
</svg>Overview</a>
				</div>
				<div class="end-section-next">
					
				</div>
			</div>
			
		</div>
	</div>
</div>
<div class="doc-footer">
	<div class="container">
		<div class="row">
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">About</p>
				<div><a href="/index.html" title="Saker.build home page">Home</a></div>
				<div data-footer-location="doc-docs"><a href="../../index.html" title="saker.java.testing documentation index">Documentation index</a></div>
				<div><a href="../../../saker.build/index.html" title="Information about the saker.build system">saker.build system</a></div>
				<div><a href="../../../saker.nest/index.html" title="Information about the saker.nest repository">saker.nest repository</a></div>
				<div><a href="/contact.html" title="Contact us">Contact</a></div>
			</div>
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">Resources</p>
				<div data-footer-location="doc-docs"><a href="../../doc/index.html" title="saker.java.testing documentation index">Documentation</a></div>
				<div data-footer-location="doc-javadoc"><a href="../../javadoc/index.html" title="JavaDoc for saker.java.testing">JavaDoc</a></div>
				<div data-footer-location="doc-taskdoc"><a href="../../taskdoc/index.html"  title="Documentation of build tasks in saker.java.testing">TaskDoc</a></div>
				<div data-footer-location="nest-package"><a href="https://nest.saker.build/package/saker.java.testing" title="saker.java.testing | saker.nest">saker.java.testing on saker.nest</a></div>
				<div><a href="https://github.com/sakerbuild/saker.java.testing" title="saker.java.testing on GitHub">GitHub</a></div>
			</div>
		</div>	
		<div class="row">
			<div class="col">
			&copy; Bence Sipka 2020
			</div>
		</div>
	</div>
</div>


<script>
if(window.hasOwnProperty("hljs")){
	hljs.configure({
	  languages: []
	});
	hljs.initHighlightingOnLoad();
}
</script>

</body>
</html>