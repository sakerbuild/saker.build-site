<!DOCTYPE html>
<html>
<head>
	<title>Compiler options&nbsp;|&nbsp;saker.msvc</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
	
	<link rel="stylesheet" href="../../../res/bootstrap.min.css" >
	<link rel="stylesheet" href="../../../res/doc-saker.css" >
</head>
<body data-nav-location="packagedoc" data-subdoc-presence="nest-package packagedoc javadoc taskdoc">
<div class="doc-nav-bar">
	<div class="container">
		<a class="home-link" href="../../index.html" title="saker.msvc"><img style="height: 2.5em;" class="logo" src="../../../res/logo.svg"/><span class="page-name">saker.msvc</span></a>
		<a class="nav-location-item" data-nav-location="doc-docs" href="../../doc/index.html" title="Documentation">Documentation</a>
		<a class="nav-location-item" data-nav-location="doc-taskdoc" href="../../taskdoc/index.html" title="Build task documentation">TaskDoc</a>
		<a class="nav-location-item" data-nav-location="doc-javadoc" href="../../javadoc/index.html"title="Java API documentation">JavaDoc</a>
	</div>
</div>
<div class="container page-contents packagedoc">
	<div class="row">
		<div class="col-12 col-lg-3 col-xl-2 p-lg-0">
			<div class="doc-navigation-container">
				<label class="d-lg-none nav-collapse" for="doc-collapse-nav-label">
					<svg style="height: 1.5em;" viewBox="0 0 24 24">
					    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
					</svg>
					Navigation
				</label>
				<input style="display:none;" id="doc-collapse-nav-label" type="checkbox"/> 
				<div class="doc-nav">  <div class="doc-section">    <p class="section-title">Package details</p><ul><li><a class="doc-nav-section-link" href="../index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../gettingstarted.html" title="Getting started">Getting started</a></li><li><a class="doc-nav-section-link" href="../performancecomparison.html" title="Performance comparison">Performance comparison</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">C/C++ compilation</p><ul><li><a class="doc-nav-section-link" href="index.html" title="Basics">Basics</a></li><li><a class="doc-nav-section-link" href="ccompilation.html" title="Compiling">Compiling</a></li><li><a class="doc-nav-section-link" href="linking.html" title="Linking">Linking</a></li><li class="doc-active doc-active-parent"><a class="doc-nav-section-link" href="compileroptions.html" title="Compiler options">Compiler options</a></li><li><a class="doc-nav-section-link" href="linkeroptions.html" title="Linker options">Linker options</a></li><li><a class="doc-nav-section-link" href="optionpresets.html" title="Option presets">Option presets</a></li><li><a class="doc-nav-section-link" href="sdkmanagement.html" title="SDK management">SDK management</a></li><li><a class="doc-nav-section-link" href="buildclusters.html" title="Build clusters">Build clusters</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Examples</p><ul><li><a class="doc-nav-section-link" href="../examples/index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../examples/helloworld.html" title="Hello world">Hello world</a></li><li><a class="doc-nav-section-link" href="../examples/hellodll.html" title="Hello DLL">Hello DLL</a></li><li><a class="doc-nav-section-link" href="../examples/simpleparameters.html" title="Passing compiler/linker parameters">Passing compiler/linker parameters</a></li><li><a class="doc-nav-section-link" href="../examples/macrodefinitions.html" title="Macro definitions">Macro definitions</a></li><li><a class="doc-nav-section-link" href="../examples/includedirectories.html" title="Include directories">Include directories</a></li><li><a class="doc-nav-section-link" href="../examples/librarypath.html" title="Library path">Library path</a></li><li><a class="doc-nav-section-link" href="../examples/architecture.html" title="Architecture">Architecture</a></li><li><a class="doc-nav-section-link" href="../examples/optionmerging.html" title="Option merging">Option merging</a></li><li><a class="doc-nav-section-link" href="../examples/optionpresets.html" title="Option presets">Option presets</a></li></ul>  </div></div>
			</div>
		</div>
		<div class="col-12 col-lg-9 col-xl-10 doc-page">
			<div class="sb-sponsors" style="display: none;">
	<span class="sb-sponsors-title">Sponsors</span>
	<div class="container">
		<div class="row">
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
		</div>
	</div>
</div>
			<div class="doc-content"><h1 id="compiler-options">Compiler options<a class="doc-heading-anchor" href="#compiler-options"></a></h1>
<p>The <a href="../../taskdoc/saker.msvc.ccompile.html"><code>saker.msvc.ccompile()</code></a> task allows dynamic option merging based on the identifier, architecture, and compilation language of the inputs. It can be used to define the compilation parameters in one place that can be applied to one or more compilation tasks selectively.</p>
<p>A simple example for this is to define some macros for the preprocessor based on the compilation architecture:</p>
<pre><code class="language-sakerscript"><span class="d">$options</span> = <span class="e">[</span>
	<span class="e">{</span>
		<span class="f">Architecture</span>: <span class="b">x86</span><span class="e">,</span>
		<span class="f">MacroDefinitions</span>: <span class="e">{</span>
			<span class="f">MARCHITECTURE</span>: <span class="b">X86</span><span class="e">
		}
	},</span>
	<span class="e">{</span>
		<span class="f">Architecture</span>: <span class="b">x64</span><span class="e">,</span>
		<span class="f">MacroDefinitions</span>: <span class="e">{</span>
			<span class="f">MARCHITECTURE</span>: <span class="b">X64</span><span class="e">
		}
	},</span>
<span class="e">]</span>
<span class="a"><a href="../../../saker.msvc/taskdoc/saker.msvc.ccompile.html" title="Task: saker.msvc.ccompile()">saker.msvc.ccompile</a>(</span>
	<span class="b">src/**/*.cpp</span>,
	<span class="c">Architecture: </span><span class="b">x86</span>,
	<span class="c">CompilerOptions: </span><span class="d">$options</span>
<span class="a">)</span>
<span class="a"><a href="../../../saker.msvc/taskdoc/saker.msvc.ccompile.html" title="Task: saker.msvc.ccompile()">saker.msvc.ccompile</a>(</span>
	<span class="b">src/**/*.cpp</span>,
	<span class="c">Architecture: </span><span class="b">x64</span>,
	<span class="c">CompilerOptions: </span><span class="d">$options</span>
<span class="a">)</span>
</code></pre>
<p>The compilation tasks will be set up in a way that the <code>MARCHITECTURE</code> preprocessor macro will be defined with the value of <code>X86</code> when compiling for <code>x86</code> and with the value of <code>X64</code> when compiling for <code>x64</code> architecture.</p>
<p>The mergeability of the options can also be decided based on the compilation <code>Identifier</code> and the <code>Language</code> of the compiled sources.</p>
<p>This facility can be used to compile various inputs with different options dynamically. For example if we'd like to compile the sources for multiple languages, we can use multiple include directories based on the language:</p>
<pre><code class="language-sakerscript"><span class="d">$options</span> = <span class="e">[</span>
	<span class="e">{</span>
		<span class="f">Identifier</span>: <span class="b">en</span><span class="e">,</span>
		<span class="f">IncludeDirectories</span>: <span class="b">inc/en</span><span class="e">
	},</span>
	<span class="e">{</span>
		<span class="f">Identifier</span>: <span class="b">de</span><span class="e">,</span>
		<span class="f">IncludeDirectories</span>: <span class="b">inc/de</span><span class="e">
	},</span>
	<span class="e">{</span>
		<span class="f">Identifier</span>: <span class="b">es</span><span class="e">,</span>
		<span class="f">IncludeDirectories</span>: <span class="b">inc/es</span><span class="e">
	}
]</span>
<span class="g">foreach </span><span class="d">$lang</span><span class="g"> in </span><span class="e">[</span><span class="b">en</span><span class="e">,</span> <span class="b">de</span><span class="e">,</span> <span class="b">es</span><span class="e">]</span> {
	<span class="a"><a href="../../../saker.msvc/taskdoc/saker.msvc.ccompile.html" title="Task: saker.msvc.ccompile()">saker.msvc.ccompile</a>(</span>
		<span class="b">src/**/*.cpp</span>,
		<span class="c">Identifier: </span><span class="b">&quot;main-</span>{ <span class="d">$lang</span> }<span class="b">&quot;</span>,
		<span class="c">CompilerOptions: </span><span class="d">$options</span>
	<span class="a">)</span>
}
</code></pre>
<p>In the above example we compile the source files defined by the <code>src/**/*.cpp</code> wildcard, and use different include directories for each compilation pass. If we're compiling for english, the <code>inc/en</code> include directory will be used, as the option entry with the <code>en</code> identifier is merged with the compilation pass options. (And similarly with other languages.)</p>
<p>A compiler option entry will be merged with the compilation pass if all of the dot separated identifier parts are contained in the compilation identifier of the task.</p>
<link href="../../../css/sakerscript.css"  rel="stylesheet" type="text/css" /></div>
			<div class="end-section-links">
				<div class="end-section-prev">
					<a class="doc-prev-section" href="../../doc/ccompile/linking.html" title="Linking"><svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" />
</svg>Linking</a>
				</div>
				<div class="end-section-next">
					<a class="doc-next-section" href="../../doc/ccompile/linkeroptions.html" title="Linker options">Linker options<svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" />
</svg></a>
				</div>
			</div>
			
		</div>
	</div>
</div>
<div class="doc-footer">
	<div class="container">
		<div class="row">
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">About</p>
				<div><a href="/index.html" title="Saker.build home page">Home</a></div>
				<div data-footer-location="doc-docs"><a href="../../index.html" title="saker.msvc documentation home">Documentation home</a></div>
				<div><a href="../../../saker.build/index.html" title="Information about the saker.build system">saker.build system</a></div>
				<div><a href="../../../saker.nest/index.html" title="Information about the saker.nest repository">saker.nest repository</a></div>
				<div><a href="/contact.html" title="Contact us">Contact</a></div>
			</div>
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">Resources</p>
				<div data-footer-location="doc-docs"><a href="../../doc/index.html" title="saker.msvc documentation home">Documentation</a></div>
				<div data-footer-location="doc-javadoc"><a href="../../javadoc/index.html" title="JavaDoc for saker.msvc">JavaDoc</a></div>
				<div data-footer-location="doc-taskdoc"><a href="../../taskdoc/index.html"  title="Documentation of build tasks in saker.msvc">TaskDoc</a></div>
				<div data-footer-location="nest-package"><a href="https://nest.saker.build/package/saker.msvc" title="saker.msvc | saker.nest">saker.nest package page</a></div>
				<div><a href="https://github.com/sakerbuild/saker.msvc" title="saker.msvc on GitHub">GitHub</a></div>
			</div>
		</div>	
		<div class="row">
			<div class="col">
			&copy; Bence Sipka 2020
			</div>
		</div>
	</div>
</div>


<script>
if(window.hasOwnProperty("hljs")){
	hljs.configure({
	  languages: []
	});
	hljs.initHighlightingOnLoad();
}
</script>

</body>
</html>