<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>SDK management&nbsp;|&nbsp;saker.msvc</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
	
	<link rel="stylesheet" href="../../../res/bootstrap.min.css" >
	<link rel="stylesheet" href="../../../res/doc-saker.css" >
</head>
<body data-nav-location="packagedoc" data-subdoc-presence="nest-package packagedoc javadoc taskdoc">
<div class="doc-nav-bar">
	<div class="container">
		<a class="home-link" href="../../index.html" title="saker.msvc"><img style="height: 2.5em;" class="logo" src="../../../res/logo.svg"/><span class="page-name">saker.msvc</span></a>
		<a class="nav-location-item" data-nav-location="doc-docs" href="../../doc/index.html" title="Documentation">Documentation</a>
		<a class="nav-location-item" data-nav-location="doc-taskdoc" href="../../taskdoc/index.html" title="Build task documentation">TaskDoc</a>
		<a class="nav-location-item" data-nav-location="doc-javadoc" href="../../javadoc/index.html"title="Java API documentation">JavaDoc</a>
	</div>
</div>
<div class="container page-contents packagedoc">
	<div class="row">
		<div class="col-12 col-lg-3 col-xl-2 p-lg-0">
			<div class="doc-navigation-container">
				<label class="d-lg-none nav-collapse" for="doc-collapse-nav-label">
					<svg style="height: 1.5em;" viewBox="0 0 24 24">
					    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
					</svg>
					Navigation
				</label>
				<input style="display:none;" id="doc-collapse-nav-label" type="checkbox"/> 
				<div class="doc-nav">  <div class="doc-section"><ul><li><a class="doc-nav-section-link" href="../../index.html" title="Index">Index</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Package details</p><ul><li><a class="doc-nav-section-link" href="../index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../gettingstarted.html" title="Getting started">Getting started</a></li><li><a class="doc-nav-section-link" href="../performancecomparison.html" title="Performance comparison">Performance comparison</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">C/C++ compilation</p><ul><li><a class="doc-nav-section-link" href="index.html" title="Basics">Basics</a></li><li><a class="doc-nav-section-link" href="ccompilation.html" title="Compiling">Compiling</a></li><li><a class="doc-nav-section-link" href="linking.html" title="Linking">Linking</a></li><li><a class="doc-nav-section-link" href="compileroptions.html" title="Compiler options">Compiler options</a></li><li><a class="doc-nav-section-link" href="linkeroptions.html" title="Linker options">Linker options</a></li><li><a class="doc-nav-section-link" href="optionpresets.html" title="Option presets">Option presets</a></li><li class="doc-active doc-active-parent"><a class="doc-nav-section-link" href="sdkmanagement.html" title="SDK management">SDK management</a></li><li><a class="doc-nav-section-link" href="precompiledheaders.html" title="Precompiled headers">Precompiled headers</a></li><li><a class="doc-nav-section-link" href="forceinclude.html" title="Force inclusion">Force inclusion</a></li><li><a class="doc-nav-section-link" href="buildclusters.html" title="Build clusters">Build clusters</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Examples</p><ul><li><a class="doc-nav-section-link" href="../examples/index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../examples/helloworld.html" title="Hello world">Hello world</a></li><li><a class="doc-nav-section-link" href="../examples/hellodll.html" title="Hello DLL">Hello DLL</a></li><li><a class="doc-nav-section-link" href="../examples/simpleparameters.html" title="Passing compiler/linker parameters">Passing compiler/linker parameters</a></li><li><a class="doc-nav-section-link" href="../examples/macrodefinitions.html" title="Macro definitions">Macro definitions</a></li><li><a class="doc-nav-section-link" href="../examples/includedirectories.html" title="Include directories">Include directories</a></li><li><a class="doc-nav-section-link" href="../examples/librarypath.html" title="Library path">Library path</a></li><li><a class="doc-nav-section-link" href="../examples/architecture.html" title="Architecture">Architecture</a></li><li><a class="doc-nav-section-link" href="../examples/optionmerging.html" title="Option merging">Option merging</a></li><li><a class="doc-nav-section-link" href="../examples/optionpresets.html" title="Option presets">Option presets</a></li></ul>  </div></div>
			</div>
		</div>
		<div class="col-12 col-lg-9 col-xl-10 doc-page">
			<div class="sb-sponsors" style="display: none;">
	<span class="sb-sponsors-title">Sponsors</span>
	<div class="container">
		<div class="row">
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
		</div>
	</div>
</div>
			<div class="doc-content"><h1 id="sdk-management">SDK management<a class="doc-heading-anchor" href="#sdk-management"></a></h1>
<p>The tasks in the saker.msvc package use the <a href="../../../saker.sdk.support/index.html" title="Index">saker.sdk.support</a> package for managing the SDKs that they work with. SDKs can be used to specify which MSVC installation to be used when compiling the sources, or to specify inputs based on them.</p>
<p>Both the compiler and linker task work with the SDK named <code>MSVC</code>. They will locate the <a href="https://docs.microsoft.com/en-us/cpp/build/reference/compiling-a-c-cpp-program?view=vs-2019" title="MSVC C/C++ compiler reference - Visual Studio | Microsoft Docs"><code>cl.exe</code></a> and <a href="https://docs.microsoft.com/en-us/cpp/build/reference/linking?view=vs-2019" title="MSVC linker reference | Microsoft Docs"><code>link.exe</code></a> which are used to perform their operations based on the specified SDK. If no SDKs are specified with the name <code>MSVC</code>, the tasks will attempt to locate a default one based on the environment they're running on.</p>
<p>To specify an SDK to be used with a given version, you can use the <a href="../../taskdoc/saker.msvc.sdk.html"><code>saker.msvc.sdk()</code></a> task:</p>
<pre><code class="language-sakerscript"><span class="e"><a href="../../../saker.msvc/taskdoc/saker.msvc.ccompile.html" title="Task: saker.msvc.ccompile()">saker.msvc.ccompile</a>(</span>
	<span class="i">Input</span>: <span class="k">### ... ###</span>,
	<span class="i">SDKs: </span><span class="b">{</span>
		<span class="h">MSVC</span>: <span class="e"><a href="../../../saker.msvc/taskdoc/saker.msvc.sdk.html" title="Task: saker.msvc.sdk()">saker.msvc.sdk</a>(</span><span class="f">14.22.27905</span><span class="e">)</span><span class="b">
	}</span>
<span class="e">)</span>
</code></pre>
<p>The above will cause the task to attempt to locate a Microsoft Visual C++ toolchain installation with the version <code>14.22.27905</code>. If the task fails, it will thrown an appropriate error.</p>
<h2 id="msvc-environment-parameters">MSVC environment parameters<a class="doc-heading-anchor" href="#msvc-environment-parameters"></a></h2>
<p>There may be cases when the package can't find automatically the installed MSVC toolchain installations. In these cases you will need to add an appropriate user parameter for the build environment.</p>
<p>You can specify the <code>saker.msvc.sdk.install.location.&lt;version&gt;</code> environment parameter with the path to the install location of the toolchain for the given version.</p>
<p>For example:</p>
<pre><code class="language-plaintext">saker.msvc.sdk.install.location.14.22.27905=c:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.22.27905
</code></pre>
<h3 id="legacy-toolchain-layout">Legacy toolchain layout<a class="doc-heading-anchor" href="#legacy-toolchain-layout"></a></h3>
<p>The tasks support the legacy layout of the MSVC installations. The installation locations that are used with Visual Studio 15 or older versions are considered to be <em>legacy</em>. More information about layout differences: <a href="https://devblogs.microsoft.com/cppblog/compiler-tools-layout-in-visual-studio-15/" title="Compiler Tools Layout in Visual Studio 2017 | C++ Team Blog">Compiler Tools Layout in Visual Studio 2017 | C++ Team Blog</a>.</p>
<p>In order to specify a legacy layout, use the <code>saker.msvc.legacy.sdk.install.location.&lt;version&gt;</code> environment parameter:</p>
<pre><code class="language-plaintext">saker.msvc.legacy.sdk.install.location.14.0=c:\Program Files (x86)\Microsoft Visual Studio 14.0\VC
</code></pre>
<p>You can reference legacy layout SDKs using the <code>LegacyVersion</code> parameter:</p>
<pre><code class="language-sakerscript"><span class="e"><a href="../../../saker.msvc/taskdoc/saker.msvc.ccompile.html" title="Task: saker.msvc.ccompile()">saker.msvc.ccompile</a>(</span>
	<span class="i">Input</span>: <span class="k">### ... ###</span>,
	<span class="i">SDKs: </span><span class="b">{</span>
		<span class="h">MSVC</span>: <span class="e"><a href="../../../saker.msvc/taskdoc/saker.msvc.sdk.html" title="Task: saker.msvc.sdk()">saker.msvc.sdk</a>(</span><span class="i">LegacyVersion</span>: <span class="f">14.0</span><span class="e">)</span><span class="b">
	}</span>
<span class="e">)</span>
</code></pre>
<p>In these cases the version is considered to be the one as in the <code>Microsoft Visual Studio &lt;version&gt;</code> parent directory.</p>
<h2 id="windows-kits">Windows kits<a class="doc-heading-anchor" href="#windows-kits"></a></h2>
<p>When developing with the MSVC toolchain, you are most likely to use the Windows SDK. The Windows SDK contains the necessary headers, libraries and other resources to develop for the Windows operating system. (E.g. <code>Windows.h</code>)</p>
<p>The <a href="../../taskdoc/saker.msvc.sdk.windowskits.html"><code>saker.msvc.sdk.windowskits()</code></a> task allows locating the Windows SDK. Without any arguments, it will look for it under the <code>Program Files (x86)</code> and <code>Program Files</code> directory. However, you can also set the requested version number:</p>
<pre><code class="language-sakerscript"><span class="e"><a href="../../../saker.msvc/taskdoc/saker.msvc.ccompile.html" title="Task: saker.msvc.ccompile()">saker.msvc.ccompile</a>(</span>
	<span class="i">Input</span>: <span class="b">{</span>
		<span class="h">Files</span>: <span class="f">src/**/*.cpp</span><span class="b">,</span>
		<span class="h">IncludeDirectories</span>: <span class="b">[</span>
			<span class="e"><a href="../../../saker.sdk.support/taskdoc/sdk.path.html" title="Task: sdk.path()">sdk.path</a>(</span><span class="f">WindowsKits</span>, <span class="i">Identifier: </span><span class="f">include.shared</span><span class="e">)</span><span class="b">,</span>
			<span class="e"><a href="../../../saker.sdk.support/taskdoc/sdk.path.html" title="Task: sdk.path()">sdk.path</a>(</span><span class="f">WindowsKits</span>, <span class="i">Identifier: </span><span class="f">include.ucrt</span><span class="e">)</span><span class="b">,</span>
			<span class="e"><a href="../../../saker.sdk.support/taskdoc/sdk.path.html" title="Task: sdk.path()">sdk.path</a>(</span><span class="f">WindowsKits</span>, <span class="i">Identifier: </span><span class="f">include.um</span><span class="e">)</span><span class="b">
		]
	}</span>,
	<span class="i">SDKs: </span><span class="b">{</span>
		<span class="h">WindowsKits</span>: <span class="e"><a href="../../../saker.msvc/taskdoc/saker.msvc.sdk.windowskits.html" title="Task: saker.msvc.sdk.windowskits()">saker.msvc.sdk.windowskits</a>(</span><span class="f">10.0.18362.0</span><span class="e">)</span><span class="b">
	}</span>
<span class="e">)</span>
</code></pre>
<p>The above example uses the Windows Kits SDK with the version of <code>10.0.18362.0</code>, and adds some include directories from it for the compilation.</p>
<p>Note that the WindowsKits SDK is not an absolute requirement for the compilation and linker tasks to work, however, you most likely will need it when using them.</p>
<p>The <a href="../../taskdoc/saker.msvc.coptions.preset.html"><code>saker.msvc.coptions.preset()</code></a> when used will add the <code>WindowsKits</code> SDK if necessary to the tasks if not specified explicitly by the developer.</p>
<h3 id="windows-kits-environment-parameter">Windows kits environment parameter<a class="doc-heading-anchor" href="#windows-kits-environment-parameter"></a></h3>
<p>The <code>saker.msvc.windowskits.sdk.install.location.&lt;version&gt;</code> build environment user parameter can be used to specify the location of a Windows Kits installation.</p>
<p>For example:</p>
<pre><code class="language-plaintext">saker.msvc.windowskits.sdk.install.location.10.0.18362.0=c:\Program Files (x86)\Windows Kits\10
</code></pre>
<p>Note that you must specify the installation directory path that contains the <code>Include</code>, <code>Lib</code> and other directories instead of any of the subdirectories.</p>
<link href="../../../css/sakerscript.css"  rel="stylesheet" type="text/css" /></div>
			<div class="end-section-links">
				<div class="end-section-prev">
					<a class="doc-prev-section" href="../../doc/ccompile/optionpresets.html" title="Option presets"><svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" />
</svg>Option presets</a>
				</div>
				<div class="end-section-next">
					<a class="doc-next-section" href="../../doc/ccompile/precompiledheaders.html" title="Precompiled headers">Precompiled headers<svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" />
</svg></a>
				</div>
			</div>
			<div class="doc-headings-nav">  <ul>    <li><a href="#sdk-management" title="SDK management">SDK management</a>      <ul>        <li><a href="#msvc-environment-parameters" title="MSVC environment parameters">MSVC environment parameters</a>          <ul>            <li><a href="#legacy-toolchain-layout" title="Legacy toolchain layout">Legacy toolchain layout</a>            </li>          </ul>        </li>        <li><a href="#windows-kits" title="Windows kits">Windows kits</a>          <ul>            <li><a href="#windows-kits-environment-parameter" title="Windows kits environment parameter">Windows kits environment parameter</a>            </li>          </ul>        </li>      </ul>    </li>  </ul></div>
		</div>
	</div>
</div>
<div class="doc-footer">
	<div class="container">
		<div class="row">
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">About</p>
				<div><a href="/index.html" title="Saker.build home page">Home</a></div>
				<div data-footer-location="doc-docs"><a href="../../index.html" title="saker.msvc documentation index">Documentation index</a></div>
				<div><a href="../../../saker.build/index.html" title="Information about the saker.build system">saker.build system</a></div>
				<div><a href="../../../saker.nest/index.html" title="Information about the saker.nest repository">saker.nest repository</a></div>
				<div><a href="/contact.html" title="Contact us">Contact</a></div>
			</div>
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">Resources</p>
				<div data-footer-location="doc-docs"><a href="../../doc/index.html" title="saker.msvc documentation index">Documentation</a></div>
				<div data-footer-location="doc-javadoc"><a href="../../javadoc/index.html" title="JavaDoc for saker.msvc">JavaDoc</a></div>
				<div data-footer-location="doc-taskdoc"><a href="../../taskdoc/index.html"  title="Documentation of build tasks in saker.msvc">TaskDoc</a></div>
				<div data-footer-location="nest-package"><a href="https://nest.saker.build/package/saker.msvc" title="saker.msvc | saker.nest">saker.nest package page</a></div>
				<div><a href="https://github.com/sakerbuild/saker.msvc" title="saker.msvc on GitHub">GitHub</a></div>
			</div>
		</div>	
		<div class="row">
			<div class="col">
			&copy; Bence Sipka 2020
			</div>
		</div>
	</div>
</div>

<link rel="stylesheet" href="../../../res/hljs.css"><script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js" integrity="sha256-js+I1fdbke/DJrW2qXQlrw7VUEqmdeFeOW37UC0bEiU=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.13.1/build/languages/plaintext.min.js"></script>
<script>
if(window.hasOwnProperty("hljs")){
	hljs.configure({
	  languages: []
	});
	hljs.initHighlightingOnLoad();
}
</script>

</body>
</html>