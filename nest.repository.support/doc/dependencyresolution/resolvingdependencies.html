<!DOCTYPE html>
<html>
<head>
	<title>Resolving dependencies&nbsp;|&nbsp;nest.repository.support</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
	
	<link rel="stylesheet" href="../../../res/bootstrap.min.css" >
	<link rel="stylesheet" href="../../../res/doc-saker.css" >
</head>
<body data-nav-location="packagedoc" data-subdoc-presence="nest-package packagedoc javadoc taskdoc">
<div class="doc-nav-bar">
	<div class="container">
		<a class="home-link" href="../../index.html" title="nest.repository.support"><img style="height: 2.5em;" class="logo" src="../../../res/logo.svg"/><span class="page-name">nest.repository.support</span></a>
		<a class="nav-location-item" data-nav-location="doc-docs" href="../../doc/index.html" title="Documentation">Documentation</a>
		<a class="nav-location-item" data-nav-location="doc-taskdoc" href="../../taskdoc/index.html" title="Build task documentation">TaskDoc</a>
		<a class="nav-location-item" data-nav-location="doc-javadoc" href="../../javadoc/index.html"title="Java API documentation">JavaDoc</a>
	</div>
</div>
<div class="container page-contents packagedoc">
	<div class="row">
		<div class="col-12 col-lg-3 col-xl-2 p-lg-0">
			<div class="doc-navigation-container">
				<label class="d-lg-none nav-collapse" for="doc-collapse-nav-label">
					<svg style="height: 1.5em;" viewBox="0 0 24 24">
					    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
					</svg>
					Navigation
				</label>
				<input style="display:none;" id="doc-collapse-nav-label" type="checkbox"/> 
				<div class="doc-nav">  <div class="doc-section">    <p class="section-title">Package details</p><ul><li><a class="doc-nav-section-link" href="../index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../gettingstarted.html" title="Getting started">Getting started</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Bundle management</p><ul><li><a class="doc-nav-section-link" href="../bundlemanagement/index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../bundlemanagement/localize.html" title="Bundle localization">Bundle localization</a></li><li><a class="doc-nav-section-link" href="../bundlemanagement/download.html" title="Bundle downloading">Bundle downloading</a></li><li><a class="doc-nav-section-link" href="../bundlemanagement/install.html" title="Local installing">Local installing</a></li><li><a class="doc-nav-section-link" href="../bundlemanagement/upload.html" title="Server upload">Server upload</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Dependency resolution</p><ul><li><a class="doc-nav-section-link" href="index.html" title="Overview">Overview</a></li><li class="doc-active doc-active-parent"><a class="doc-nav-section-link" href="resolvingdependencies.html" title="Resolving dependencies">Resolving dependencies</a></li><li><a class="doc-nav-section-link" href="filters.html" title="Dependency filters">Dependency filters</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Examples</p><ul><li><a class="doc-nav-section-link" href="../examples/index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../examples/bundledependenciesresolve.html" title="Bundle dependencies">Bundle dependencies</a></li><li><a class="doc-nav-section-link" href="../examples/dependencyfileresolve.html" title="Resolve dependency file">Resolve dependency file</a></li><li><a class="doc-nav-section-link" href="../examples/pinversion.html" title="Pin version">Pin version</a></li><li><a class="doc-nav-section-link" href="../examples/dependencykinds.html" title="Dependency kinds">Dependency kinds</a></li><li><a class="doc-nav-section-link" href="../examples/compilefilter.html" title="Compile filter">Compile filter</a></li><li><a class="doc-nav-section-link" href="../examples/javacompileclasspath.html" title="Java compile classpath">Java compile classpath</a></li><li><a class="doc-nav-section-link" href="../examples/dependencyconstraints.html" title="Dependency constraints">Dependency constraints</a></li><li><a class="doc-nav-section-link" href="../examples/download.html" title="Download bundles">Download bundles</a></li><li><a class="doc-nav-section-link" href="../examples/localize.html" title="Localize bundles">Localize bundles</a></li><li><a class="doc-nav-section-link" href="../examples/localinstall.html" title="Local install bundle">Local install bundle</a></li><li><a class="doc-nav-section-link" href="../examples/serverupload.html" title="Upload bundle">Upload bundle</a></li></ul>  </div></div>
			</div>
		</div>
		<div class="col-12 col-lg-9 col-xl-10 doc-page">
			<div class="sb-sponsors" style="display: none;">
	<span class="sb-sponsors-title">Sponsors</span>
	<div class="container">
		<div class="row">
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
		</div>
	</div>
</div>
			<div class="doc-content"><h1 id="resolving-dependencies">Resolving dependencies<a class="doc-heading-anchor" href="#resolving-dependencies"></a></h1>
<p>The <a href="../../taskdoc/nest.dependency.resolve.html"><code>nest.dependency.resolve()</code></a> task can be used to resolve dependencies in the saker.nest repository. The specified dependencies are resolved using the alroithm specified by the repository.</p>
<p>The task can resolve explicity specified dependencies, as well as dependencies specified using a <a href="../../../saker.nest/doc/devguide/bundleformat.html#dependency-file" title="Dependency file">dependency file</a>. The nature of the dependency resolution can be customized using the <code>Filters</code> parameter, which can be used to set filters for the dependency resolution. The filters are used to specify which dependencies should be resolved, and which ones should be omitted.</p>
<p>The task can also be used to resolve the versions of bundles without taking the transitive dependencies into account.</p>
<p>Note that in the following examples all of the dependencies for the associated bundles are resolved. In order to resolve dependencies for a specific kind, see <a href="filters.html" title="Dependency filters">Dependency filters</a>.</p>
<h2 id="resolve-bundles">Resolve bundles<a class="doc-heading-anchor" href="#resolve-bundles"></a></h2>
<p>Simple bundle dependencies can be resolved in the following way:</p>
<pre><code class="language-sakerscript"><span class="a"><a href="../../../nest.repository.support/taskdoc/nest.dependency.resolve.html" title="Task: nest.dependency.resolve()">nest.dependency.resolve</a>(</span><span class="e">[</span>
	<span class="b">first.bundle</span><span class="e">,</span>
	<span class="b">second.bundle-api</span><span class="e">,</span>
	<span class="b">third.bundle-v1.0</span><span class="e">
]</span><span class="a">)</span>
</code></pre>
<p>In the above, we resolve the dependencies for the specified bundles. The given bundle identifiers may contain qualifiers, and version numbers as well. If the bundle has no version number defined for them, then it will be determined by the dependency resolution algorithm (usually the latest release).</p>
<h2 id="dependency-file">Dependency file<a class="doc-heading-anchor" href="#dependency-file"></a></h2>
<p>The task can accept a <a href="../../../saker.nest/doc/devguide/bundleformat.html#dependency-file" title="Dependency file">dependency file</a> that declares the dependencies to be resolved:</p>
<pre><code class="language-sakerscript"><span class="a"><a href="../../../nest.repository.support/taskdoc/nest.dependency.resolve.html" title="Task: nest.dependency.resolve()">nest.dependency.resolve</a>(</span>
	<span class="c">DependencyFile</span>: <span class="b">res/META-INF/nest/dependencies</span>
<span class="a">)</span>
</code></pre>
<p>In the above, the specified file will be parsed by the task, and the declared dependencies in it will be resolved.</p>
<h3 id="this"><code>this</code><a class="doc-heading-anchor" href="#this"></a></h3>
<p>The dependency file allows the <code>this</code> identifier to be specified in which case the version of the enclosing bundle will be substituted in place of it. The <code>SelfBundle</code> parameter allows specifying the bundle that should be considered to be enclosing the given <code>DependencyFile</code>:</p>
<pre><code class="language-sakerscript"><span class="a"><a href="../../../nest.repository.support/taskdoc/nest.dependency.resolve.html" title="Task: nest.dependency.resolve()">nest.dependency.resolve</a>(</span>
	<span class="c">DependencyFile</span>: <span class="b">res/META-INF/nest/dependencies</span>,
	<span class="c">SelfBundle: </span><span class="b">example.bundle-v1.0</span>
<span class="a">)</span>
</code></pre>
<p>In this case, if the specified dependency file contains a <code>this</code> identifier, the version <code>1.0</code> is substituted in place of it.</p>
<p><strong>Note</strong> that if the dependency file contains a <code>this</code> token, and a self bundle is not specified, an exception will be thrown, as the dependency file couldn't be parsed.</p>
<h2 id="version-pinning">Version pinning<a class="doc-heading-anchor" href="#version-pinning"></a></h2>
<p>When using dependency files, or dealing with transitive dependencies, you may need to pin specific bundle versions. You can do that by specifying bundles with versions alongside the dependency file:</p>
<pre><code class="language-sakerscript"><span class="a"><a href="../../../nest.repository.support/taskdoc/nest.dependency.resolve.html" title="Task: nest.dependency.resolve()">nest.dependency.resolve</a>(</span>
	<span class="c">DependencyFile</span>: <span class="b">res/META-INF/nest/dependencies</span>,
	<span class="c">Bundles: </span><span class="e">[</span>
		<span class="b">first.bundle-v1.0</span><span class="e">,</span>
		<span class="b">second.bundle-v2.0</span><span class="e">
	]</span>
<span class="a">)</span>
</code></pre>
<p>The above adds the <code>first.bundle-v1.0</code> and <code>second.bundle-v2.0</code> dependencies to be resolved alongside the dependency file. Specifying the bundles with a given version will result in them being used rather than choosing an other one with possibly different version.</p>
<p><strong>Note</strong> that this is not actually version pinning, but adding additional dependencies with an exact version. If the dependency file doesn't declare dependency on the given bundles (directly or transitively), the specified bundles will still be resolved.</p>
<h2 id="dependency-kinds-and-filtering">Dependency kinds and filtering<a class="doc-heading-anchor" href="#dependency-kinds-and-filtering"></a></h2>
<p>Please see <a href="filters.html" title="Dependency filters">Dependency filters</a>.</p>
<h2 id="dependency-constraints">Dependency constraints<a class="doc-heading-anchor" href="#dependency-constraints"></a></h2>
<p>The <a href="../../taskdoc/nest.dependency.resolve.html"><code>nest.dependency.resolve()</code></a> task allows resolving the dependencies with a different set of <a href="../../../saker.nest/doc/userguide/constraints.html" title="Constraint properties">dependency constraints</a>. You can use the <code>DependencyConstraints</code> parameter so specify different constraints for the dependencies:</p>
<pre><code class="language-sakerscript"><span class="a"><a href="../../../nest.repository.support/taskdoc/nest.dependency.resolve.html" title="Task: nest.dependency.resolve()">nest.dependency.resolve</a>(</span>
	<span class="c">DependencyConstraints</span>: <span class="e">{</span>
		<span class="f">JREMajorVersion</span>: <span class="b">9</span><span class="e">
	}</span>
<span class="a">)</span>
</code></pre>
<p>In the above, the dependencies will be resolved as if they were constrained for a Java runtime with major version of 9.</p>
<p>See <a href="../../../saker.nest/doc/userguide/constraints.html" title="Constraint properties">Constraint properties</a> for more information about dependency constraints.</p>
<link href="../../../css/sakerscript.css"  rel="stylesheet" type="text/css" /></div>
			<div class="end-section-links">
				<div class="end-section-prev">
					<a class="doc-prev-section" href="../../doc/dependencyresolution/index.html" title="Overview"><svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" />
</svg>Overview</a>
				</div>
				<div class="end-section-next">
					<a class="doc-next-section" href="../../doc/dependencyresolution/filters.html" title="Dependency filters">Dependency filters<svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" />
</svg></a>
				</div>
			</div>
			<div class="doc-headings-nav">  <ul>    <li><a href="#resolving-dependencies" title="Resolving dependencies">Resolving dependencies</a>      <ul>        <li><a href="#resolve-bundles" title="Resolve bundles">Resolve bundles</a>        </li>        <li><a href="#dependency-file" title="Dependency file">Dependency file</a>          <ul>            <li><a href="#this" title="this">this</a>            </li>          </ul>        </li>        <li><a href="#version-pinning" title="Version pinning">Version pinning</a>        </li>        <li><a href="#dependency-kinds-and-filtering" title="Dependency kinds and filtering">Dependency kinds and filtering</a>        </li>        <li><a href="#dependency-constraints" title="Dependency constraints">Dependency constraints</a>        </li>      </ul>    </li>  </ul></div>
		</div>
	</div>
</div>
<div class="doc-footer">
	<div class="container">
		<div class="row">
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">About</p>
				<div><a href="/index.html" title="Saker.build home page">Home</a></div>
				<div data-footer-location="doc-docs"><a href="../../index.html" title="nest.repository.support documentation home">Documentation home</a></div>
				<div><a href="../../../saker.build/index.html" title="Information about the saker.build system">saker.build system</a></div>
				<div><a href="../../../saker.nest/index.html" title="Information about the saker.nest repository">saker.nest repository</a></div>
				<div><a href="/contact.html" title="Contact us">Contact</a></div>
			</div>
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">Resources</p>
				<div data-footer-location="doc-docs"><a href="../../doc/index.html" title="nest.repository.support documentation home">Documentation</a></div>
				<div data-footer-location="doc-javadoc"><a href="../../javadoc/index.html" title="JavaDoc for nest.repository.support">JavaDoc</a></div>
				<div data-footer-location="doc-taskdoc"><a href="../../taskdoc/index.html"  title="Documentation of build tasks in nest.repository.support">TaskDoc</a></div>
				<div data-footer-location="nest-package"><a href="https://nest.saker.build/package/nest.repository.support" title="nest.repository.support | saker.nest">saker.nest package page</a></div>
				<div><a href="https://github.com/sakerbuild/nest.repository.support" title="nest.repository.support on GitHub">GitHub</a></div>
			</div>
		</div>	
		<div class="row">
			<div class="col">
			&copy; Bence Sipka 2020
			</div>
		</div>
	</div>
</div>


<script>
if(window.hasOwnProperty("hljs")){
	hljs.configure({
	  languages: []
	});
	hljs.initHighlightingOnLoad();
}
</script>

</body>
</html>