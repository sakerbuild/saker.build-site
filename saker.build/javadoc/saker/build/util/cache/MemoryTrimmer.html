<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>MemoryTrimmer</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
	
	<link rel="stylesheet" type="text/css" href="../../../../../../res/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="../../../../../../res/doc-saker.css">
	
	<script type="application/ld+json">
	{
	  "@context": "https://schema.org",
	  "@type": "WebSite",
	  "name": "saker.build",
	  "url": "https://saker.build/saker.build/javadoc"
	}
	</script>
</head>
<body data-nav-location="javadoc" data-subdoc-presence="nest-package packagedoc javadoc">
<div class="doc-nav-bar">
	<div class="container">
		<a class="home-link" href="../../../../../index.html" title="saker.build"><img style="height: 2.5em;" class="logo" src="../../../../../../res/logo.svg"/><span class="page-name">saker.build</span></a>
		<a class="nav-location-item" data-nav-location="doc-docs" href="../../../../../doc/index.html" title="Documentation">Documentation</a>
		<a class="nav-location-item" data-nav-location="doc-taskdoc" href="../../../../../taskdoc/index.html" title="Build task documentation">TaskDoc</a>
		<a class="nav-location-item" data-nav-location="doc-javadoc" href="../../../../../javadoc/index.html"title="Java API documentation">JavaDoc</a>
		<span class="nav-hover-packages-item"><span class="nav-hover-packages-span" onclick="return false;">Packages</span><div class="nav-hover-packages">
<ul>
<li><a href="/nest.repository.support/doc/index.html">nest.repository.support</a></li>
<li><a href="/saker.android/doc/index.html">saker.android</a></li>
<li><a href="/saker.build/doc/index.html">saker.build</a></li>
<li><a href="/saker.compiler.utils/doc/index.html">saker.compiler.utils</a></li>
<li><a href="/saker.jar/doc/index.html">saker.jar</a></li>
<li><a href="/saker.java.compiler/doc/index.html">saker.java.compiler</a></li>
<li><a href="/saker.java.testing/doc/index.html">saker.java.testing</a></li>
<li><a href="/saker.maven.classpath/doc/index.html">saker.maven.classpath</a></li>
<li><a href="/saker.maven.support/doc/index.html">saker.maven.support</a></li>
<li><a href="/saker.msvc/doc/index.html">saker.msvc</a></li>
<li><a href="/saker.nest/doc/index.html">saker.nest</a></li>
<li><a href="/saker.rmi/doc/index.html">saker.rmi</a></li>
<li><a href="/saker.sdk.support/doc/index.html">saker.sdk.support</a></li>
<li><a href="/saker.standard/doc/index.html">saker.standard</a></li>
<li><a href="/saker.util/doc/index.html">saker.util</a></li>
<li><a href="/saker.zip/doc/index.html">saker.zip</a></li>
</ul>
</div></span>
		<div class="nav-bar-controls">
			<label class="d-xl-none nav-bar-collapse" for="collapse-nav-bar-label">
				<svg style="height: 1.5em;" viewBox="0 0 24 24">
				    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
				</svg>
			</label>
			<input style="display:none;" id="collapse-nav-bar-label" type="checkbox"/>
			<div class="nav-bar-items">
				<a href="/" title="saker.build home page">Home</a>
				<a href="/buildtrace.html" title="Build trace viewer">Build trace</a>
				<a style="display:none;" href="/sponsor.html" title="Sponsoring development">Sponsor</a>
				<a href="/blog/" title="saker.build system blog">Blog</a>
				<a class="no-external-icon" href="https://github.com/sakerbuild/saker.build" title="saker.build GitHub repository">GitHub</a>
			</div>
		</div>
	</div>
</div>
<nav class="javadoc-nav" data-nav-location="MemoryTrimmer">
	<div class="container">
		<span class="javadoc-nav-title">JavaDoc</span>
		<a class="nav-location-item" data-nav-location="javadoc-packages" href="../../../../index.html" title="Package index">Packages</a>
		<a class="nav-location-item" data-nav-location="javadoc-all-classes" href="../../../../all-classes.html" title="All classes">All classes</a>
		<a class="nav-location-item" data-nav-location="javadoc-constants" href="../../../../constants.html" title="All constants">Constants</a>
	</div>
</nav>
<div class="container page-contents javadoc">
	<div class="javadoc-content">
	<div class="javadoc-class-header"><div class="javadoc-class-header-pkg"><span class="javadoc-code-ref"><span class="javadoc-kw">package</span> <a href="index.html" title="saker.build.util.cache" data-javadoc-kind="package">saker.build.util.cache</a></span></div><div class="javadoc-class-header-class"><span class="javadoc-kw">public class </span><span class="javadoc-class-header-name">MemoryTrimmer</span></div></div><div class="javadoc-class-super-hierarchy"><div class="javadoc-class-super-hierarchy-entry"><span class="javadoc-code-ref"><a href="#" title="class saker.build.util.cache.MemoryTrimmer" data-javadoc-kind="class">saker.build.util.cache.MemoryTrimmer</a></span><div class="javadoc-class-super-hierarchy-entry"><span class="javadoc-code-ref"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class java.lang.Object" data-javadoc-kind="class">java.lang.Object</a></span></div></div></div><div class="javadoc-class-doc"><div class="javadoc-class-doc-body">Static class for allowing clients to trim memory of objects when appropriate. <p>
 <span class="javadoc-code-ref"><a href="#" title="class saker.build.util.cache.MemoryTrimmer" data-javadoc-kind="class">MemoryTrimmer</a></span> serves as JVM-wide utility class to collect objects and trim their memory allocation when an
 appropriate time is found to do it. This time is usually after a build execution is finished.
 <p>
 Clients can use the <span class="javadoc-code-ref"><a href="#add-T-java.util.function.Consumer-" title="MemoryTrimmer.add(T, Consumer<? super T>)" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">add<span class="javadoc-code-ref">(<wbr><span class="javadoc-tp" title="T of MemoryTrimmer.add(T, Consumer<? super T>)">T</span>, Consumer&lt;<wbr>?&nbsp;<span class="javadoc-kw">super</span> <span class="javadoc-tp" title="T of MemoryTrimmer.add(T, Consumer<? super T>)">T</span>&gt;)</span></a></span> function to post objects for trimming later.
 <p>
 All of the posted objects in this class are weakly referenced, except the trimmer functions. This allows premature
 garbage collection of the trimmable objects. The trimmer functions should not strongly reference the trimmable
 object, it will be passed to it as an argument when trimming occurs.
 <p>
 Trimming can be invoked manually by anyone using the functions starting with <code>trim</code>. The class ensures
 that a trimming function for a single object will be only called at most once for each <span class="javadoc-code-ref"><a href="#add-T-java.util.function.Consumer-" title="MemoryTrimmer.add(T, Consumer<? super T>)" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">add<span class="javadoc-code-ref">(<wbr><span class="javadoc-tp" title="T of MemoryTrimmer.add(T, Consumer<? super T>)">T</span>, Consumer&lt;<wbr>?&nbsp;<span class="javadoc-kw">super</span> <span class="javadoc-tp" title="T of MemoryTrimmer.add(T, Consumer<? super T>)">T</span>&gt;)</span></a></span>
 calls with it.</div></div><div class="javadoc-class-idx"><div class="javadoc-class-idx-methods javadoc-idx-section"><table><caption>Methods</caption><thead><tr><th class="javadoc-th-method-meta"></th><th class="javadoc-th-method-details"></th></tr></thead><tbody><tr class="javadoc-class-idx-method javadoc-idx-member"><td class="javadoc-class-idx-method-meta javadoc-idx-member-meta"><span class="javadoc-kw">public static </span>&lt;<wbr><span class="javadoc-tp">T</span>&gt; <span class="javadoc-code-ref"><span class="javadoc-kw">void</span></span></td><td class="javadoc-class-idx-method-sig javadoc-idx-member-sig"><div class="javadoc-class-idx-method-name javadoc-idx-member-name"><a href="#add-T-java.util.function.Consumer-" title="MemoryTrimmer.add(T, Consumer<? super T>)" data-javadoc-kind="method" data-javadoc-enclosing-kind="class" class="javadoc-sig-name">add</a><span class="javadoc-code-ref">(<wbr><span class="javadoc-method-param"><span class="javadoc-tp" title="T of MemoryTrimmer.add(T, Consumer<? super T>)">T</span> object, </span><span class="javadoc-method-param"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html" title="interface java.util.function.Consumer" data-javadoc-kind="interface">Consumer</a>&lt;<wbr>?&nbsp;<span class="javadoc-kw">super</span> <span class="javadoc-tp" title="T of MemoryTrimmer.add(T, Consumer<? super T>)">T</span>&gt; trimmerfunction</span>)</span></div><div class="javadoc-class-idx-method-short javadoc-member-short">Posts the object for trimming using the trimmer function.</div></td></tr><tr class="javadoc-class-idx-method javadoc-idx-member"><td class="javadoc-class-idx-method-meta javadoc-idx-member-meta"><span class="javadoc-kw">public static </span><span class="javadoc-code-ref"><span class="javadoc-kw">void</span></span></td><td class="javadoc-class-idx-method-sig javadoc-idx-member-sig"><div class="javadoc-class-idx-method-name javadoc-idx-member-name"><a href="#trimAll--" title="MemoryTrimmer.trimAll()" data-javadoc-kind="method" data-javadoc-enclosing-kind="class" class="javadoc-sig-name">trimAll</a><span class="javadoc-code-ref">()</span></div><div class="javadoc-class-idx-method-short javadoc-member-short">Trims all the objects in the queue.</div></td></tr><tr class="javadoc-class-idx-method javadoc-idx-member"><td class="javadoc-class-idx-method-meta javadoc-idx-member-meta"><span class="javadoc-kw">public static </span><span class="javadoc-code-ref"><span class="javadoc-kw">void</span></span></td><td class="javadoc-class-idx-method-sig javadoc-idx-member-sig"><div class="javadoc-class-idx-method-name javadoc-idx-member-name"><a href="#trimInterruptible-java.util.function.BooleanSupplier-" title="MemoryTrimmer.trimInterruptible(BooleanSupplier)" data-javadoc-kind="method" data-javadoc-enclosing-kind="class" class="javadoc-sig-name">trimInterruptible</a><span class="javadoc-code-ref">(<wbr><span class="javadoc-method-param"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/BooleanSupplier.html" title="interface java.util.function.BooleanSupplier" data-javadoc-kind="interface">BooleanSupplier</a> shouldinterruptpredicate</span>)</span></div><div class="javadoc-class-idx-method-short javadoc-member-short">Trims the objects in the queue with optional interruptability.</div></td></tr></tbody></table></div><div class="javadoc-class-idx-inherited-methods javadoc-idx-section"><table><caption>Inherited methods</caption><tbody><tr class="javadoc-class-idx-inherited-methods-entry"><td><div class="javadoc-class-idx-inherited-methods-title">From: <span class="javadoc-code-ref"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class java.lang.Object" data-javadoc-kind="class">Object</a></span></div><div class="javadoc-class-idx-inherited-methods-list"><span class="javadoc-code-ref"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="Object.clone()" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="Object.equals(Object)" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="Object.finalize()" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="Object.getClass()" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="Object.hashCode()" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="Object.notify()" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="Object.notifyAll()" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="Object.toString()" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="Object.wait()" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="Object.wait(long)" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="Object.wait(long, int)" data-javadoc-kind="method" data-javadoc-enclosing-kind="class">wait</a></span></div></td></tr></tbody></table></div></div><div class="javadoc-class-details"><div class="javadoc-class-details-methods javadoc-details-section"><div id="add-T-java.util.function.Consumer-" class="javadoc-class-detail-method javadoc-class-detail-member"><div class="javadoc-class-detail-method-sig javadoc-member-sig"><span class="javadoc-kw">public static </span>&lt;<wbr><span class="javadoc-tp">T</span>&gt; <span class="javadoc-code-ref"><span class="javadoc-kw">void</span></span> <a href="#add-T-java.util.function.Consumer-" title="MemoryTrimmer.add(T, Consumer<? super T>)" data-javadoc-kind="method" data-javadoc-enclosing-kind="class" class="javadoc-sig-name">add</a><span class="javadoc-code-ref">(<wbr><span class="javadoc-method-param"><span class="javadoc-tp" title="T of MemoryTrimmer.add(T, Consumer<? super T>)">T</span> object, </span><span class="javadoc-method-param"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html" title="interface java.util.function.Consumer" data-javadoc-kind="interface">Consumer</a>&lt;<wbr>?&nbsp;<span class="javadoc-kw">super</span> <span class="javadoc-tp" title="T of MemoryTrimmer.add(T, Consumer<? super T>)">T</span>&gt; trimmerfunction</span>)</span></div><div class="javadoc-class-detail-method-detail javadoc-member-detail"><div class="javadoc-detail-body">Posts the object for trimming using the trimmer function. <p>
 The trimmer function must not hold a strong reference to the object. The object will be passed to the trimmer
 function at the time of trimming.
 <p>
 Callers can expect the object to be trimmed in any time after initiating this method call. However, they must not
 expect that the trimming will always or even deterministicly occur.</div><div class="javadoc-method-detail-params javadoc-blocktag-section"><div class="javadoc-method-detail-param"><span class="javadoc-method-detail-param-name">object</span><span class="javadoc-method-detail-param-detail">The object to trim.</span></div><div class="javadoc-method-detail-param"><span class="javadoc-method-detail-param-name">trimmerfunction</span><span class="javadoc-method-detail-param-detail">The trimmer function.</span></div></div></div></div><div id="trimAll--" class="javadoc-class-detail-method javadoc-class-detail-member"><div class="javadoc-class-detail-method-sig javadoc-member-sig"><span class="javadoc-kw">public static </span><span class="javadoc-code-ref"><span class="javadoc-kw">void</span></span> <a href="#trimAll--" title="MemoryTrimmer.trimAll()" data-javadoc-kind="method" data-javadoc-enclosing-kind="class" class="javadoc-sig-name">trimAll</a><span class="javadoc-code-ref">()</span></div><div class="javadoc-class-detail-method-detail javadoc-member-detail"><div class="javadoc-detail-body">Trims all the objects in the queue.</div></div></div><div id="trimInterruptible-java.util.function.BooleanSupplier-" class="javadoc-class-detail-method javadoc-class-detail-member"><div class="javadoc-class-detail-method-sig javadoc-member-sig"><span class="javadoc-kw">public static </span><span class="javadoc-code-ref"><span class="javadoc-kw">void</span></span> <a href="#trimInterruptible-java.util.function.BooleanSupplier-" title="MemoryTrimmer.trimInterruptible(BooleanSupplier)" data-javadoc-kind="method" data-javadoc-enclosing-kind="class" class="javadoc-sig-name">trimInterruptible</a><span class="javadoc-code-ref">(<wbr><span class="javadoc-method-param"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/BooleanSupplier.html" title="interface java.util.function.BooleanSupplier" data-javadoc-kind="interface">BooleanSupplier</a> shouldinterruptpredicate</span>)</span></div><div class="javadoc-class-detail-method-detail javadoc-member-detail"><div class="javadoc-detail-body">Trims the objects in the queue with optional interruptability. <p>
 The trimming will stop if either no more objects remaining or the predicate returns <code>true</code>.</div><div class="javadoc-method-detail-params javadoc-blocktag-section"><div class="javadoc-method-detail-param"><span class="javadoc-method-detail-param-name">shouldinterruptpredicate</span><span class="javadoc-method-detail-param-detail">The interrupt predicate.</span></div></div></div></div></div></div>
	</div>
</div>
<div class="doc-footer">
	<div class="container">
		<div class="row">
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">About</p>
				<div><a href="/index.html" title="Saker.build home page">Home</a></div>
				<div data-footer-location="doc-docs"><a href="../../../../../index.html" title="saker.build documentation index">Documentation index</a></div>
				<div><a href="../../../../../../saker.build/index.html" title="Information about the saker.build system">saker.build system</a></div>
				<div><a href="../../../../../../saker.nest/index.html" title="Information about the saker.nest repository">saker.nest repository</a></div>
				<div><a href="/contact.html" title="Contact us">Contact</a></div>
			</div>
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">Resources</p>
				<div data-footer-location="doc-docs"><a href="../../../../../doc/index.html" title="saker.build documentation index">Documentation</a></div>
				<div data-footer-location="doc-javadoc"><a href="../../../../../javadoc/index.html" title="JavaDoc for saker.build">JavaDoc</a></div>
				<div data-footer-location="doc-taskdoc"><a href="../../../../../taskdoc/index.html"  title="Documentation of build tasks in saker.build">TaskDoc</a></div>
				<div data-footer-location="nest-package"><a href="https://nest.saker.build/package/saker.build" title="saker.build | saker.nest">saker.build on saker.nest</a></div>
				<div><a href="https://github.com/sakerbuild/saker.build" title="saker.build on GitHub">GitHub</a></div>
			</div>
		</div>	
		<div class="row">
			<div class="col site-copyright">
			&copy; Bence Sipka 2020
			</div>
		</div>
	</div>
</div>
</body>
</html>