<!DOCTYPE html>
<html>
<head>
	<title>File handling&nbsp;|&nbsp;saker.build</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
	
	<link rel="stylesheet" href="../../../../res/bootstrap.min.css" >
	<link rel="stylesheet" href="../../../../res/doc-saker.css" >
</head>
<body data-nav-location="packagedoc" data-subdoc-presence="nest-package packagedoc javadoc">
<div class="doc-nav-bar">
	<div class="container">
		<a class="home-link" href="../../../index.html" title="saker.build"><img style="height: 2.5em;" class="logo" src="../../../../res/logo.svg"/><span class="page-name">saker.build</span></a>
		<a class="nav-location-item" data-nav-location="doc-docs" href="../../../doc/index.html" title="Documentation">Documentation</a>
		<a class="nav-location-item" data-nav-location="doc-taskdoc" href="../../../taskdoc/index.html" title="Build task documentation">TaskDoc</a>
		<a class="nav-location-item" data-nav-location="doc-javadoc" href="../../../javadoc/index.html"title="Java API documentation">JavaDoc</a>
	</div>
</div>
<div class="container page-contents packagedoc">
	<div class="row">
		<div class="col-12 col-lg-3 col-xl-2 p-lg-0">
			<div class="doc-navigation-container">
				<label class="d-lg-none nav-collapse" for="doc-collapse-nav-label">
					<svg style="height: 1.5em;" viewBox="0 0 24 24">
					    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
					</svg>
					Navigation
				</label>
				<input style="display:none;" id="doc-collapse-nav-label" type="checkbox"/> 
				<div class="doc-nav">  <div class="doc-section"><ul><li><a class="doc-nav-section-link" href="../../../index.html" title="Index">Index</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Introduction</p><ul><li><a class="doc-nav-section-link" href="../../index.html" title="Overview">Overview</a></li><li><label class="doc-nav-collapse" for="_doc_collapse_id_0"><a class="doc-nav-section-link" href="../../installation.html" title="Installation">Installation</a></label><input style="display:none;" id="_doc_collapse_id_0" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_0"></label><ul><li><a class="doc-nav-section-link" href="../../eclipseplugin.html" title="Eclipse plugin">Eclipse plugin</a></li><li><a class="doc-nav-section-link" href="../../releasearchive.html" title="Release archive">Release archive</a></li></ul></li><li><a class="doc-nav-section-link" href="../../perfcomparison.html" title="Performance comparisons">Performance comparisons</a></li><li><a class="doc-nav-section-link" href="../../roadmap.html" title="Roadmap">Roadmap</a></li><li><label class="doc-nav-collapse" for="_doc_collapse_id_1"><a class="doc-nav-section-link" href="../../contribute.html" title="Contribute">Contribute</a></label><input style="display:none;" id="_doc_collapse_id_1" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_1"></label><ul><li><a class="doc-nav-section-link" href="../../buildstatus.html" title="Build status">Build status</a></li></ul></li></ul>  </div>  <div class="doc-section">    <p class="section-title">User guide</p><ul><li><label class="doc-nav-collapse" for="_doc_collapse_id_2"><a class="doc-nav-section-link" href="../../guide/index.html" title="Introduction">Introduction</a></label><input style="display:none;" id="_doc_collapse_id_2" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_2"></label><ul><li><a class="doc-nav-section-link" href="../../guide/helloworld.html" title="Hello world">Hello world</a></li><li><a class="doc-nav-section-link" href="../../guide/buildtargets.html" title="Build targets">Build targets</a></li><li><a class="doc-nav-section-link" href="../../guide/datastructures.html" title="Data structures">Data structures</a></li><li><a class="doc-nav-section-link" href="../../guide/foreach.html" title="Foreach loop">Foreach loop</a></li><li><a class="doc-nav-section-link" href="../../guide/controlflow.html" title="Control flow">Control flow</a></li></ul></li><li><a class="doc-nav-section-link" href="../../guide/incremental.html" title="Incremental builds">Incremental builds</a></li><li><a class="doc-nav-section-link" href="../../guide/runtime.html" title="Build system runtime">Build system runtime</a></li><li><a class="doc-nav-section-link" href="../../guide/envconfig.html" title="Environment configuration">Environment configuration</a></li><li><a class="doc-nav-section-link" href="../../guide/execparams.html" title="Execution parameters">Execution parameters</a></li><li><a class="doc-nav-section-link" href="../../guide/pathconfiguration.html" title="Path configuration">Path configuration</a></li><li><a class="doc-nav-section-link" href="../../guide/repositories.html" title="Task repositories">Task repositories</a></li><li><a class="doc-nav-section-link" href="../../guide/scriptlanguages.html" title="Script languages">Script languages</a></li><li><a class="doc-nav-section-link" href="../../guide/daemon.html" title="Build daemon">Build daemon</a></li><li><a class="doc-nav-section-link" href="../../guide/filechangetracking.html" title="File change tracking">File change tracking</a></li><li><a class="doc-nav-section-link" href="../../guide/remotebuild.html" title="Remote build execution">Remote build execution</a></li><li><a class="doc-nav-section-link" href="../../guide/buildclusters.html" title="Build clusters">Build clusters</a></li><li><a class="doc-nav-section-link" href="../../guide/buildcache.html" title="Build cache">Build cache</a></li><li><a class="doc-nav-section-link" href="../../guide/reproducible.html" title="Reproducible builds">Reproducible builds</a></li><li><a class="doc-nav-section-link" href="../../guide/wildcards.html" title="Wildcard paths">Wildcard paths</a></li><li><label class="doc-nav-collapse" for="_doc_collapse_id_3"><a class="doc-nav-section-link" href="../../guide/cmdlineref/index.html" title="Command line reference">Command line reference</a></label><input style="display:none;" id="_doc_collapse_id_3" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_3"></label><ul><li><a class="doc-nav-section-link" href="../../guide/cmdlineref/build.html" title="build">build</a></li><li><label class="doc-nav-collapse" for="_doc_collapse_id_4"><a class="doc-nav-section-link" href="../../guide/cmdlineref/daemon.html" title="daemon">daemon</a></label><input style="display:none;" id="_doc_collapse_id_4" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_4"></label><ul><li><a class="doc-nav-section-link" href="../../guide/cmdlineref/daemon_start.html" title="start">start</a></li><li><a class="doc-nav-section-link" href="../../guide/cmdlineref/daemon_stop.html" title="stop">stop</a></li><li><a class="doc-nav-section-link" href="../../guide/cmdlineref/daemon_run.html" title="run">run</a></li><li><a class="doc-nav-section-link" href="../../guide/cmdlineref/daemon_io.html" title="io">io</a></li><li><a class="doc-nav-section-link" href="../../guide/cmdlineref/daemon_info.html" title="info">info</a></li></ul></li><li><a class="doc-nav-section-link" href="../../guide/cmdlineref/action.html" title="action">action</a></li><li><a class="doc-nav-section-link" href="../../guide/cmdlineref/licenses.html" title="licenses">licenses</a></li><li><a class="doc-nav-section-link" href="../../guide/cmdlineref/version.html" title="version">version</a></li></ul></li><li><a class="doc-nav-section-link" href="../../guide/scriptstyleguide.html" title="Build script style guide">Build script style guide</a></li><li><a class="doc-nav-section-link" href="../../guide/bestpractices.html" title="Best practices">Best practices</a></li><li><a class="doc-nav-section-link" href="../../examplecollection.html" title="Example collection">Example collection</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Scripting language</p><ul><li><a class="doc-nav-section-link" href="../../scripting/index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../../scripting/executionmodel.html" title="Execution model">Execution model</a></li><li><label class="doc-nav-collapse" for="_doc_collapse_id_5"><a class="doc-nav-section-link" href="../../scripting/langref/index.html" title="Language reference">Language reference</a></label><input style="display:none;" id="_doc_collapse_id_5" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_5"></label><ul><li><a class="doc-nav-section-link" href="../../scripting/langref/sourcefile/index.html" title="Source file">Source file</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/expressions/index.html" title="Expressions">Expressions</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/comments/index.html" title="Comments">Comments</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/literals/index.html" title="Literals">Literals</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/variables/index.html" title="Variables">Variables</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/tasks/index.html" title="Task extensions">Task extensions</a></li><li><label class="doc-nav-collapse" for="_doc_collapse_id_6"><a class="doc-nav-section-link" href="../../scripting/langref/operators/index.html" title="Operators">Operators</a></label><input style="display:none;" id="_doc_collapse_id_6" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_6"></label><ul><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/addition/index.html" title="Addition">Addition</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/assignment/index.html" title="Assignment">Assignment</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/bitnegate/index.html" title="Bitwise negate">Bitwise negate</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/bitoperators/index.html" title="Bitwise operators">Bitwise operators</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/bitshiftoperators/index.html" title="Bitwise shift operators">Bitwise shift operators</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/boolnegate/index.html" title="Boolean negate">Boolean negate</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/booloperators/index.html" title="Boolean operators">Boolean operators</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/dereference/index.html" title="Dereference">Dereference</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/equality/index.html" title="Equality comparison">Equality comparison</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/mathoperators/index.html" title="Mathematic operators">Mathematic operators</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/comparison/index.html" title="Numeric comparison">Numeric comparison</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/parentheses/index.html" title="Parentheses">Parentheses</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/subscript/index.html" title="Subscript">Subscript</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/ternary/index.html" title="Ternary">Ternary</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/operators/unaryminus/index.html" title="Unary minus">Unary minus</a></li></ul></li><li><a class="doc-nav-section-link" href="../../scripting/langref/ifelse/index.html" title="If-else statement">If-else statement</a></li><li><a class="doc-nav-section-link" href="../../scripting/langref/foreach/index.html" title="Foreach expression">Foreach expression</a></li></ul></li><li><label class="doc-nav-collapse" for="_doc_collapse_id_7"><a class="doc-nav-section-link" href="../../scripting/builtintasks/index.html" title="Built-in tasks">Built-in tasks</a></label><input style="display:none;" id="_doc_collapse_id_7" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_7"></label><ul><li><a class="doc-nav-section-link" href="../../scripting/builtintasks/abort.html" title="abort()">abort()</a></li><li><a class="doc-nav-section-link" href="../../scripting/builtintasks/global.html" title="global()">global()</a></li><li><a class="doc-nav-section-link" href="../../scripting/builtintasks/include.html" title="include()">include()</a></li><li><a class="doc-nav-section-link" href="../../scripting/builtintasks/path.html" title="path()">path()</a></li><li><a class="doc-nav-section-link" href="../../scripting/builtintasks/print.html" title="print()">print()</a></li><li><a class="doc-nav-section-link" href="../../scripting/builtintasks/sequence.html" title="sequence()">sequence()</a></li><li><a class="doc-nav-section-link" href="../../scripting/builtintasks/static.html" title="static()">static()</a></li><li><a class="doc-nav-section-link" href="../../scripting/builtintasks/var.html" title="var()">var()</a></li></ul></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Extending saker.build</p><ul><li><a class="doc-nav-section-link" href="../index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../api.html" title="Build system API">Build system API</a></li><li class=" doc-active-parent"><label class="doc-nav-collapse" for="_doc_collapse_id_8"><a class="doc-nav-section-link" href="index.html" title="Task development">Task development</a></label><input style="display:none;" id="_doc_collapse_id_8" type="checkbox" checked/><label class="doc-nav-section-arrow" for="_doc_collapse_id_8"></label><ul><li><a class="doc-nav-section-link" href="helloworld.html" title="Hello world">Hello world</a></li><li><a class="doc-nav-section-link" href="taskparameters.html" title="Task parameters">Task parameters</a></li><li><a class="doc-nav-section-link" href="taskresults.html" title="Task results">Task results</a></li><li class="doc-active doc-active-parent"><label class="doc-nav-collapse" for="_doc_collapse_id_9"><a class="doc-nav-section-link" href="filehandling.html" title="File handling">File handling</a></label><input style="display:none;" id="_doc_collapse_id_9" type="checkbox" checked/><label class="doc-nav-section-arrow" for="_doc_collapse_id_9"></label><ul><li><a class="doc-nav-section-link" href="filedependencies.html" title="File dependencies">File dependencies</a></li><li><a class="doc-nav-section-link" href="fileadditiondependency.html" title="File addition dependency">File addition dependency</a></li><li><a class="doc-nav-section-link" href="customfiles.html" title="Custom files">Custom files</a></li><li><a class="doc-nav-section-link" href="filemirroring.html" title="File mirroring">File mirroring</a></li></ul></li><li><a class="doc-nav-section-link" href="propertydependencies.html" title="Property dependencies">Property dependencies</a></li><li><label class="doc-nav-collapse" for="_doc_collapse_id_10"><a class="doc-nav-section-link" href="taskmanagement.html" title="Task management">Task management</a></label><input style="display:none;" id="_doc_collapse_id_10" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_10"></label><ul><li><a class="doc-nav-section-link" href="startingtasks.html" title="Starting tasks">Starting tasks</a></li><li><a class="doc-nav-section-link" href="retrievingtaskresults.html" title="Retrieving task results">Retrieving task results</a></li></ul></li><li><a class="doc-nav-section-link" href="incrementaldeltas.html" title="Incremental deltas">Incremental deltas</a></li><li><a class="doc-nav-section-link" href="taskcapabilities.html" title="Task capabilities">Task capabilities</a></li><li><a class="doc-nav-section-link" href="parameterparsing.html" title="Parameter parsing">Parameter parsing</a></li><li><a class="doc-nav-section-link" href="innertasks.html" title="Inner tasks">Inner tasks</a></li><li><a class="doc-nav-section-link" href="taskworkflow.html" title="Task workflow">Task workflow</a></li><li><a class="doc-nav-section-link" href="taskcaching.html" title="Task caching">Task caching</a></li><li><a class="doc-nav-section-link" href="buildclusters.html" title="Build clusters">Build clusters</a></li><li><a class="doc-nav-section-link" href="standardio.html" title="Standard I/O">Standard I/O</a></li><li><a class="doc-nav-section-link" href="serialization.html" title="Serialization">Serialization</a></li><li><a class="doc-nav-section-link" href="ideconfig.html" title="IDE configuration">IDE configuration</a></li><li><a class="doc-nav-section-link" href="reproducible.html" title="Reproducible builds">Reproducible builds</a></li><li><a class="doc-nav-section-link" href="bestpractices.html" title="Best practices">Best practices</a></li></ul></li><li><label class="doc-nav-collapse" for="_doc_collapse_id_11"><a class="doc-nav-section-link" href="../scriptdev/index.html" title="Script language development">Script language development</a></label><input style="display:none;" id="_doc_collapse_id_11" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_11"></label><ul><li><a class="doc-nav-section-link" href="../scriptdev/structure.html" title="API structure">API structure</a></li><li><a class="doc-nav-section-link" href="../scriptdev/packaging.html" title="Packaging">Packaging</a></li><li><a class="doc-nav-section-link" href="../scriptdev/workflow.html" title="Development workflow">Development workflow</a></li></ul></li><li><label class="doc-nav-collapse" for="_doc_collapse_id_12"><a class="doc-nav-section-link" href="../repositorydev/index.html" title="Repository development">Repository development</a></label><input style="display:none;" id="_doc_collapse_id_12" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_12"></label><ul><li><a class="doc-nav-section-link" href="../repositorydev/structure.html" title="API structure">API structure</a></li><li><a class="doc-nav-section-link" href="../repositorydev/packaging.html" title="Packaging">Packaging</a></li></ul></li><li><a class="doc-nav-section-link" href="../testing/index.html" title="Integration testing">Integration testing</a></li></ul>  </div></div>
			</div>
		</div>
		<div class="col-12 col-lg-9 col-xl-10 doc-page">
			<div class="sb-sponsors" style="display: none;">
	<span class="sb-sponsors-title">Sponsors</span>
	<div class="container">
		<div class="row">
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
		</div>
	</div>
</div>
			<div class="doc-content"><p>


</p>
<h1 id="file-handling">File handling<a class="doc-heading-anchor" href="#file-handling"></a></h1>
<p>The build system maintains its own representation of files that are available for build tasks to use. Tasks <strong>must</strong> use this in-memory representation of files as this is how the build system can improve its performance, reduce I/O load, employ appropriate caching, and support remote execution.</p>
<div class="doc-warning">
<p><strong>Tasks should rarely use any low level file manipulation APIs of the Java language.</strong> Using the I/O classes in <code>java.io</code>, <code>java.nio.file</code>, <code>java.util.zip</code> and <code>java.util.jar</code> packages will often results in erroneous and inconsistent builds. Of course, exceptions may apply, but only within the services of the build system. (E.g. <a href="filemirroring.html" title="File mirroring">File mirroring</a>)</p>
</div>
<h2 id="in-memory-file-system">In-memory file system<a class="doc-heading-anchor" href="#in-memory-file-system"></a></h2>
<p>The build system has a file system represenatation where files originate from the specified root directories. All files are accessible through these directores and tasks should use these for producing inputs and outputs to the file system. The root directories may or may not correspond to an actual file system directory on a hardware storage. This mean that a directory or files may be backed by memory, over the network, or in any other implementation dependent way.</p>
<p><strong>Important</strong> to note that the in-memory file system has <strong>case-sensitive</strong> naming. If you're using Windows, it is your (the developers who use the build system) responsibility to not configure a build that can have collisions by similar case-insensitive spelling.</p>
<h3 id="interfaces">Interfaces<a class="doc-heading-anchor" href="#interfaces"></a></h3>
<p>The in-memory files are represented by the interfaces <a href="../../../javadoc/saker/build/file/SakerFile.html"><code>SakerFile</code></a> and <a href="../../../javadoc/saker/build/file/SakerDirectory.html"><code>SakerDirectory</code></a>. A <a href="../../../javadoc/saker/build/file/SakerFile.html"><code>SakerFile</code></a> is the manifestation of a file in the in-memory file system, and is responsible for holding the contents that it is associated with. The <a href="../../../javadoc/saker/build/file/SakerDirectory.html"><code>SakerDirectory</code></a> represents a folder in the file system that is able to contain files in it.</p>
<p>The <a href="../../../javadoc/saker/build/file/SakerDirectory.html"><code>SakerDirectory</code></a> interface extends <a href="../../../javadoc/saker/build/file/SakerFile.html"><code>SakerFile</code></a>. Build tasks can determine if a file is a directory, by using the <code>file instanceof SakerDirectory</code> expression.</p>
<p>Each file bears a name that cannot be modified during the lifetime of that object.</p>
<h3 id="the-file-tree">The file tree<a class="doc-heading-anchor" href="#the-file-tree"></a></h3>
<p>The files are arranged in a tree like hierarchy, in which both the parents and the children have a reference to each other. Calling <code>getParent()</code> on a file will return its parent in the file system.</p>
<p>When a file is constructed, it has no parent and can later be added to a <a href="../../../javadoc/saker/build/file/SakerDirectory.html"><code>SakerDirectory</code></a>. Without adding a file to a directory, it will have no effect whatsoever. A file can be only added to a parent directory <em>once</em>. After it has been added, it can be removed, but after it has been removed, it cannot be added to any directory again.</p>
<p>Every file has a path that represents its location from one of the root directories to the given file. Calling <code>getSakerPath()</code> will return this path.<br />
The result of this function may be absolute, in which case the file has a parent, and the root and each path name in the result represents the corresponding parent files. <br />
The result may be relative, in which case it only consists of a single path name that is the name of the file. This signals that the file currently not attached to any parents.</p>
<p>This file system is highly concurrent, and should be treated that way. Most of the results of methods which report state about the location of the file may be stale after they've been called, as other tasks may decide to modify the file hiearchy and therefore affect the file.</p>
<p>Build tasks should strive to only manipulate files that are knowingly not used by others. Tasks should only manipulate files in a unique output build directory that they've created for themselves, and place results in it in order to avoid race conditions with other tasks.</p>
<h3 id="file-contents">File contents<a class="doc-heading-anchor" href="#file-contents"></a></h3>
<p>The contents of a file may be backed in various ways defined by the respective <a href="../../../javadoc/saker/build/file/SakerFile.html"><code>SakerFile</code></a> implementation. The most important thing to know is that when a file is added to the file tree, the contents of it will not be automatically written to the underlying hardware. Therefore, if create a file, and add it to a directory, the contents of that file won't be persisted automatically to the associated disk location. This is where the requirement for synchronization comes in.</p>
<p>Synchronization of files is the process when the contents of <a href="../../../javadoc/saker/build/file/SakerFile.html"><code>SakerFile</code></a>s are written out to the underlying hardware disk. Synchronization can occur explicitly or implicitly. (Note: task developers shouldn't ever rely on the implicit synchronization persisting the file to a specific location. If you want to synchronize a file, call the appropriate synchronization method on it instead.)</p>
<p>Each file has an associated <code>ContentDescriptor</code> that is responsible for identifying the contents of a file. It is used by the build system to avoid unnecessary I/O when synchronizing files, and to detect file changes between executions.</p>
<h4 id="retrieving-contents">Retrieving contents<a class="doc-heading-anchor" href="#retrieving-contents"></a></h4>
<p>The contents of a <a href="../../../javadoc/saker/build/file/SakerFile.html"><code>SakerFile</code></a> can be accessed in two ways.</p>
<ol>
<li>The methods <code>writeTo</code>, <code>openInputStream</code>, <code>openByteSource</code>, <code>getBytes</code>, and <code>getContent</code> can all be used to get a programatic access to the contents of the file in the appropriate representation.
<ul>
<li>Calling these methods will get the contents of the file using the most efficient way. They will include an implicit synchronization, unless the opening method is considered to be efficient. If the file is already synchronized with the disk, the contents from the disk will be read and provided to the caller.
<ul>
<li>Efficient opening methods are the ones that the given file implementations specify. An opening method is considered to be efficient if retrieving the contents consume less resources (time and space) than using the hardware disk. (E.g. a file that has its contents in a memory byte array would have all of its openings methods efficient.)</li>
</ul>
</li>
</ul>
</li>
<li>Calling the above methods with <code>Impl</code> appended to them. (Like <code>openInputStreamImpl</code> and others.)
<ul>
<li>Unlike the previous point, calling these methods will not implicitly synchronize the file, and will not contact the associated hardware disk. The efficient opening methods play no role in the execution of these methods.</li>
<li>These methods are the direct implementation of the content retrieveval functions in the underlying <a href="../../../javadoc/saker/build/file/SakerFile.html"><code>SakerFile</code></a>s.</li>
<li>Unless strong reasons require, developers should use the previous opening methds than these.</li>
</ul>
</li>
</ol>
<p>Generally, clients should call the content retrieval method that fits their use-case the most. For example, if you consume the contents of a file via a stream, <code>openInputStream</code> can be the best for you. If you want to hash the contents of a file, <code>writeTo</code> might be the best for you. If you need the entire contents of the file in memory, <code>getBytes</code> or <code>getContent</code> might be best.</p>
<h4 id="content-descriptor">Content descriptor<a class="doc-heading-anchor" href="#content-descriptor"></a></h4>
<p>Each file is associated with a <code>ContentDescriptor</code> that describes the contents of a file. These descriptor objects are compared by the build system, and they are used to determine if they need synchronization, or it they've changed between executions.</p>
<p>Developers should implement their content descriptors in a way that defines the contents of the asociated file uniquely.</p>
<h4 id="synchronization">Synchronization<a class="doc-heading-anchor" href="#synchronization"></a></h4>
<p>Files can be synchronized implicitly in the <a href="filehandling.html#retrieving-contents" title="Retrieving contents">previously mentioned</a> ways, and explicitly via calling <code>synchronize</code> on them.</p>
<p>During synchronization, the content descriptor of the file is used to determine if the file has changed in relation to the disk location. If it has, then the contents of the file will be written to the given location using one of the <code>synchronizeImpl</code> methods. These methods are responsible for actually persisting the contents of a file to the given disk location.</p>
<p>When synchronization is called multiple times on a file, it is a no-op, if no others have modified the underlying disk location. This means that the build system will not execute additional I/O operations to overwrite files which have the same contents as expected.</p>
<h2 id="task-directories">Task directories<a class="doc-heading-anchor" href="#task-directories"></a></h2>
<p>The following directories are available for tasks to use:</p>
<ul>
<li>The root directories.
<ul>
<li>These are the directories that were configured as the root directories of the execution.</li>
<li>Available via <code>TaskContext.getExecutionContext().getRootDirectories()</code>.</li>
</ul>
</li>
<li>The execution working directory.
<ul>
<li>The working directory that was configured for the build execution.</li>
<li>Available via <code>TaskContext.getExecutionContext().getExecutionWorkingDirectory()</code>.</li>
<li>Tasks should use the task working directory instead.</li>
</ul>
</li>
<li>The execution build directory.
<ul>
<li>The base build directory that was configured for the build exection. May be <code>null</code>, meaning that no build directory was configured.</li>
<li>Available via <code>TaskContext.getExecutionContext().getExecutionBuildDirectory()</code>.</li>
<li>Tasks should use the task build directory instead.</li>
</ul>
</li>
<li>The task working directory.
<ul>
<li>This is the working directory that the tasks should use to resolve relative paths against. If a task was given a relative path as parameter, the task working directory should be considered as the base for it.</li>
<li>This directory can be configured for each started task independently.</li>
<li>Available via <code>TaskContext.getTaskWorkingDirectory()</code>.</li>
</ul>
</li>
<li>The task build directory.
<ul>
<li>This is the base directory that the task should use to put the output files in. They are also recommended to create a unique subdirectory in it to avoid race conditions with other tasks.</li>
<li>The directory may be <code>null</code>, if no build directory was configured for the build execution.</li>
<li>Available via <code>TaskContext.getTaskBuildDirectory()</code>.</li>
</ul>
</li>
</ul>
<link href="../../../../css/sakerscript.css"  rel="stylesheet" type="text/css" /></div>
			<div class="end-section-links">
				<div class="end-section-prev">
					<a class="doc-prev-section" href="../../../doc/extending/taskdev/taskresults.html" title="Task results"><svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" />
</svg>Task results</a>
				</div>
				<div class="end-section-next">
					<a class="doc-next-section" href="../../../doc/extending/taskdev/filedependencies.html" title="File dependencies">File dependencies<svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" />
</svg></a>
				</div>
			</div>
			<div class="doc-headings-nav">  <ul>    <li><a href="#file-handling" title="File handling">File handling</a>      <ul>        <li><a href="#in-memory-file-system" title="In-memory file system">In-memory file system</a>          <ul>            <li><a href="#interfaces" title="Interfaces">Interfaces</a>            </li>            <li><a href="#the-file-tree" title="The file tree">The file tree</a>            </li>            <li><a href="#file-contents" title="File contents">File contents</a>              <ul>                <li><a href="#retrieving-contents" title="Retrieving contents">Retrieving contents</a>                </li>                <li><a href="#content-descriptor" title="Content descriptor">Content descriptor</a>                </li>                <li><a href="#synchronization" title="Synchronization">Synchronization</a>                </li>              </ul>            </li>          </ul>        </li>        <li><a href="#task-directories" title="Task directories">Task directories</a>        </li>      </ul>    </li>  </ul></div>
		</div>
	</div>
</div>
<div class="doc-footer">
	<div class="container">
		<div class="row">
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">About</p>
				<div><a href="/index.html" title="Saker.build home page">Home</a></div>
				<div data-footer-location="doc-docs"><a href="../../../index.html" title="saker.build documentation index">Documentation index</a></div>
				<div><a href="../../../../saker.build/index.html" title="Information about the saker.build system">saker.build system</a></div>
				<div><a href="../../../../saker.nest/index.html" title="Information about the saker.nest repository">saker.nest repository</a></div>
				<div><a href="/contact.html" title="Contact us">Contact</a></div>
			</div>
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">Resources</p>
				<div data-footer-location="doc-docs"><a href="../../../doc/index.html" title="saker.build documentation index">Documentation</a></div>
				<div data-footer-location="doc-javadoc"><a href="../../../javadoc/index.html" title="JavaDoc for saker.build">JavaDoc</a></div>
				<div data-footer-location="doc-taskdoc"><a href="../../../taskdoc/index.html"  title="Documentation of build tasks in saker.build">TaskDoc</a></div>
				<div data-footer-location="nest-package"><a href="https://nest.saker.build/package/saker.build" title="saker.build | saker.nest">saker.nest package page</a></div>
				<div><a href="https://github.com/sakerbuild/saker.build" title="saker.build on GitHub">GitHub</a></div>
			</div>
		</div>	
		<div class="row">
			<div class="col">
			&copy; Bence Sipka 2020
			</div>
		</div>
	</div>
</div>


<script>
if(window.hasOwnProperty("hljs")){
	hljs.configure({
	  languages: []
	});
	hljs.initHighlightingOnLoad();
}
</script>

</body>
</html>