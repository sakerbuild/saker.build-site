<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>APK signing&nbsp;|&nbsp;saker.android</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
	
	<link rel="stylesheet" href="../../../res/bootstrap.min.css" >
	<link rel="stylesheet" href="../../../res/doc-saker.css" >

	<script type="application/ld+json">
	{
	  "@context": "https://schema.org",
	  "@type": "WebSite",
	  "name": "saker.android",
	  "url": "https://saker.build/saker.android"
	}
	</script>
</head>
<body data-nav-location="packagedoc" data-subdoc-presence="nest-package packagedoc javadoc taskdoc">
<div class="doc-nav-bar">
	<div class="container">
		<a class="home-link" href="../../index.html" title="saker.android"><img style="height: 2.5em;" class="logo" src="../../../res/logo.svg"/><span class="page-name">saker.android</span></a>
		<a class="nav-location-item" data-nav-location="doc-docs" href="../../doc/index.html" title="Documentation">Documentation</a>
		<a class="nav-location-item" data-nav-location="doc-taskdoc" href="../../taskdoc/index.html" title="Build task documentation">TaskDoc</a>
		<a class="nav-location-item" data-nav-location="doc-javadoc" href="../../javadoc/index.html"title="Java API documentation">JavaDoc</a>
		<span class="nav-hover-packages-item"><span class="nav-hover-packages-span" onclick="return false;">Packages</span><div class="nav-hover-packages">
<ul>
<li><a href="/nest.repository.support/doc/index.html">nest.repository.support</a></li>
<li><a href="/saker.android/doc/index.html">saker.android</a></li>
<li><a href="/saker.build/doc/index.html">saker.build</a></li>
<li><a href="/saker.compiler.utils/doc/index.html">saker.compiler.utils</a></li>
<li><a href="/saker.jar/doc/index.html">saker.jar</a></li>
<li><a href="/saker.java.compiler/doc/index.html">saker.java.compiler</a></li>
<li><a href="/saker.java.testing/doc/index.html">saker.java.testing</a></li>
<li><a href="/saker.maven.classpath/doc/index.html">saker.maven.classpath</a></li>
<li><a href="/saker.maven.support/doc/index.html">saker.maven.support</a></li>
<li><a href="/saker.msvc/doc/index.html">saker.msvc</a></li>
<li><a href="/saker.nest/doc/index.html">saker.nest</a></li>
<li><a href="/saker.rmi/doc/index.html">saker.rmi</a></li>
<li><a href="/saker.sdk.support/doc/index.html">saker.sdk.support</a></li>
<li><a href="/saker.standard/doc/index.html">saker.standard</a></li>
<li><a href="/saker.util/doc/index.html">saker.util</a></li>
<li><a href="/saker.zip/doc/index.html">saker.zip</a></li>
</ul>
</div></span>
		<div class="nav-bar-controls">
			<label class="d-xl-none nav-bar-collapse" for="collapse-nav-bar-label">
				<svg style="height: 1.5em;" viewBox="0 0 24 24">
				    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
				</svg>
			</label>
			<input style="display:none;" id="collapse-nav-bar-label" type="checkbox"/>
			<div class="nav-bar-items">
				<a href="/" title="saker.build home page">Home</a>
				<a href="/buildtrace.html" title="Build trace viewer">Build trace</a>
				<a style="display:none;" href="/sponsor.html" title="Sponsoring development">Sponsor</a>
				<a href="/blog/" title="saker.build system blog">Blog</a>
				<a class="no-external-icon" href="https://github.com/sakerbuild/saker.build" title="saker.build GitHub repository">GitHub</a>
			</div>
		</div>
	</div>
</div>
<div class="container page-contents packagedoc">
	<div class="row">
		<div class="col-12 col-lg-3 col-xl-2 p-lg-0">
			<div class="doc-navigation-container">
				<label class="d-lg-none nav-collapse" for="doc-collapse-nav-label">
					<svg style="height: 1.5em;" viewBox="0 0 24 24">
					    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
					</svg>
					Navigation
				</label>
				<input style="display:none;" id="doc-collapse-nav-label" type="checkbox"/> 
				<div class="doc-nav">  <div class="doc-section"><ul><li><a class="doc-nav-section-link" href="../../index.html" title="Index">Index</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Package details</p><ul><li><a class="doc-nav-section-link" href="../index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../gettingstarted.html" title="Getting started">Getting started</a></li><li><a class="doc-nav-section-link" href="../perfcomparison.html" title="Performance comparison">Performance comparison</a></li><li><a class="doc-nav-section-link" href="../unsupported.html" title="Unsupported features">Unsupported features</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Android development</p><ul><li><a class="doc-nav-section-link" href="index.html" title="Introduction">Introduction</a></li><li><a class="doc-nav-section-link" href="resources.html" title="Android resources">Android resources</a></li><li><a class="doc-nav-section-link" href="java.html" title="Java compilation">Java compilation</a></li><li><a class="doc-nav-section-link" href="dexing.html" title="Dexing">Dexing</a></li><li><a class="doc-nav-section-link" href="apkcreation.html" title="APK creation">APK creation</a></li><li class="doc-active doc-active-parent"><a class="doc-nav-section-link" href="apksigning.html" title="APK signing">APK signing</a></li><li><a class="doc-nav-section-link" href="zipaligning.html" title="Zipaligning">Zipaligning</a></li><li><a class="doc-nav-section-link" href="sdkmanagement.html" title="SDK management">SDK management</a></li><li><a class="doc-nav-section-link" href="dependencies.html" title="Dependencies">Dependencies</a></li></ul>  </div></div>
			</div>
		</div>
		<div class="col-12 col-lg-9 col-xl-10 doc-page">
			<div class="doc-breadcrumb">
				<ol itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a itemscope itemtype="https://schema.org/WebPage" itemprop="item" href="../../index.html" title="saker.android" itemid="/saker.android/index.html"><span itemprop="name">saker.android</span></a><meta itemprop="position" content="1" /></li> &rsaquo; <li><span title="Android development">Android development</span></li> &rsaquo; <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a itemscope itemtype="https://schema.org/WebPage" itemprop="item" href="apksigning.html" title="APK signing" itemid="/saker.android/doc/androiddev/apksigning.html"><span itemprop="name">APK signing</span></a><meta itemprop="position" content="2" /></li></ol>
			</div>
			<div class="sb-sponsors" style="display: none;">
	<span class="sb-sponsors-title">Sponsors</span>
	<div class="container">
		<div class="row">
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
		</div>
	</div>
</div>
			<div class="doc-content"><h1 id="apk-signing">APK signing<a class="doc-heading-anchor" href="#apk-signing"></a></h1>
<p>Each APK must be digitally signed before installing them on Android devices. This can be done using the <a href="https://developer.android.com/studio/command-line/apksigner" title="apksigner &nbsp;|&nbsp; Android Developers">apksigner</a> tool. The <a href="../../taskdoc/saker.apk.sign.html"><code>saker.apk.sign()</code></a> build task can be used to perform the signing.</p>
<p>Also note that if you're creating a release APK you should perform <a href="zipaligning.html" title="Zipaligning">zip alignment</a> <strong>before</strong> signing the APK.</p>
<p>By default, simply calling the <a href="../../taskdoc/saker.apk.sign.html"><code>saker.apk.sign()</code></a> task will sign the APK with an automatically generated debug key:</p>
<pre class="doc-code-block"><code class="language-sakerscript"><span class="c">$apk</span> = <span class="d"><a href="../../../saker.android/taskdoc/saker.apk.create.html" title="Task: saker.apk.create()">saker.apk.create</a>(</span><span class="k">### ... ###</span><span class="d">)</span>
<span class="c">$signed</span> = <span class="d"><a href="../../../saker.android/taskdoc/saker.apk.sign.html" title="Task: saker.apk.sign()">saker.apk.sign</a>(</span><span class="c">$apk</span><span class="d">)</span>
</code></pre>
<p>An APK that is signed using the debug key can be used to install and test on your own devices. You are not recommended to distribute these APKs to others as you may not be able to properly update them later.</p>
<h2 id="using-a-keystore">Using a keystore<a class="doc-heading-anchor" href="#using-a-keystore"></a></h2>
<p>For signing the APK with a specific key, use the <code>Signer</code> parameter of the <a href="../../taskdoc/saker.apk.sign.html"><code>saker.apk.sign()</code></a> task:</p>
<pre class="doc-code-block"><code class="language-sakerscript"><span class="d"><a href="../../../saker.android/taskdoc/saker.apk.sign.html" title="Task: saker.apk.sign()">saker.apk.sign</a>(</span>
	<span class="c">$apk</span>,
	<span class="h"><a href="../../../saker.android/taskdoc/saker.apk.sign.html#Signer" title="Parameter Signer of task saker.apk.sign()">Signer</a></span>: <span class="i">{</span>
		<span class="g">KeyStore</span>: <span class="e">keystore</span><span class="i">,</span>
		<span class="g">Alias</span>: <span class="e">keyalias</span><span class="i">,</span>
		<span class="g">StorePassword</span>: <span class="e">storepass</span><span class="i">,</span>
		<span class="g">KeyPassword</span>: <span class="e">keypass</span><span class="i">,</span>
	<span class="i">}</span>
<span class="d">)</span>
</code></pre>
<p>The <code>KeyStore</code> parameter specifies the path to the keystore that contains the signer key. Substitute the appropriate fields with the values for your own keystore.</p>
<p>Generating a key can be done using <a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html" title="keytool"><code>keytool</code></a>. One simple example for generating a keystore is the following command line:</p>
<pre class="doc-code-block"><code class="language-plaintext code-wrap">keytool -genkey -noprompt -keystore keystore -alias keyalias -storepass storepass -keypass keypass -keyalg RSA -validity 35600 -dname &quot;CN=Android Test, OU=, O=Android, L=, S=, C=US&quot;
</code></pre>
<link href="../../../css/sakerscript.css"  rel="stylesheet" type="text/css" /></div>
			<div class="end-section-links">
				<div class="end-section-prev">
					<a class="doc-prev-section" href="../../doc/androiddev/apkcreation.html" title="APK creation"><svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" />
</svg>APK creation</a>
				</div>
				<div class="end-section-next">
					<a class="doc-next-section" href="../../doc/androiddev/zipaligning.html" title="Zipaligning">Zipaligning<svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" />
</svg></a>
				</div>
			</div>
			<div class="doc-headings-nav">  <ul>    <li><a href="#apk-signing" title="APK signing">APK signing</a>      <ul>        <li><a href="#using-a-keystore" title="Using a keystore">Using a keystore</a>        </li>      </ul>    </li>  </ul></div>
		</div>
	</div>
</div>
<div class="doc-footer">
	<div class="container">
		<div class="row">
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">About</p>
				<div><a href="/index.html" title="Saker.build home page">Home</a></div>
				<div data-footer-location="doc-docs"><a href="../../index.html" title="saker.android documentation index">Documentation index</a></div>
				<div><a href="../../../saker.build/index.html" title="Information about the saker.build system">saker.build system</a></div>
				<div><a href="../../../saker.nest/index.html" title="Information about the saker.nest repository">saker.nest repository</a></div>
				<div><a href="/contact.html" title="Contact us">Contact</a></div>
			</div>
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">Resources</p>
				<div data-footer-location="doc-docs"><a href="../../doc/index.html" title="saker.android documentation index">Documentation</a></div>
				<div data-footer-location="doc-javadoc"><a href="../../javadoc/index.html" title="JavaDoc for saker.android">JavaDoc</a></div>
				<div data-footer-location="doc-taskdoc"><a href="../../taskdoc/index.html"  title="Documentation of build tasks in saker.android">TaskDoc</a></div>
				<div data-footer-location="nest-package"><a href="https://nest.saker.build/package/saker.android" title="saker.android | saker.nest">saker.android on saker.nest</a></div>
				<div><a href="https://github.com/sakerbuild/saker.android" title="saker.android on GitHub">GitHub</a></div>
			</div>
		</div>	
		<div class="row">
			<div class="col site-copyright">
			&copy; Bence Sipka 2020
			</div>
		</div>
	</div>
</div>

<link rel="stylesheet" href="../../../res/hljs.css"><script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js" integrity="sha256-js+I1fdbke/DJrW2qXQlrw7VUEqmdeFeOW37UC0bEiU=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.13.1/build/languages/plaintext.min.js"></script>
<script>
if(window.hasOwnProperty("hljs")){
	hljs.configure({
	  languages: []
	});
	hljs.initHighlightingOnLoad();
}
</script>

</body>
</html>